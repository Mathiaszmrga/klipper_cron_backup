Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/klipper_config/printer.cfg', '-l', '/home/pi/klipper_logs/klippy.log', '-a', '/tmp/klippy_uds']
Git version: 'v0.10.0-623-g5b1a6676'
CPU: 4 core ARMv7 Processor rev 3 (v7l)
Python: '3.7.3 (default, Jan 22 2021, 20:04:44) \n[GCC 8.3.0]'
Start printer at Thu Nov 17 22:16:23 2022 (1668744983.8 28.7)
===== Config file =====
[adxl345]
cs_pin = can0:PB12
spi_software_sclk_pin = can0:PB10
spi_software_mosi_pin = can0:PB11
spi_software_miso_pin = can0:PB2
axes_map = x,y,z

[resonance_tester]
accel_chip = adxl345
probe_points = 
	60,60,20

[neopixel hat]
pin = PA8
chain_count = 18
color_order = GRB

[gcode_macro HAT_ON]
gcode = 
	SET_LED LED=hat GREEN=1 BLUE=1 RED=1

[gcode_macro HAT_OFF]
gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=0

[neopixel underglow]
pin = PD5
chain_count = 24
color_order = GRB

[gcode_macro UNDERGLOW_ON]
gcode = 
	SET_LED LED=underglow GREEN=1 BLUE=1 RED=1

[gcode_macro UNDERGLOW_OFF]
gcode = 
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=0

[gcode_macro NEOPIXEL_DISPLAY]
gcode = 
	{% set led = params.LED %}
	{% set type = params.TYPE %}
	{% set mode = params.MODE %}
	{% set my_neopixel = printer.configfile.config['neopixel ' ~ led] %}
	
	{% if mode == 'progress' %}
	{% for i in range(my_neopixel.chain_count|int) %}
	SET_LED_TEMPLATE LED={led} INDEX={i+1} TEMPLATE={'led_' ~ type ~ '_' ~ mode} param_led_num={i+1} param_led_total={my_neopixel.chain_count|int}
	{% endfor %}
	{% endif %}
	{% if mode == 'glow' %}
	SET_LED_TEMPLATE LED={led} TEMPLATE={'led_' ~ type ~ '_' ~ mode}
	{% endif %}

[display_template led_extruder_temp_glow]
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_extruder_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_bed_temp_glow]
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_bed_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_print_percent_glow]
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_print_percent_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	{% set led_ratio   = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_printer_speed_glow]
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_printer_speed_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	{% set led_ratio    = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[gcode_macro _PRINT_START]
gcode = 
	{% set bedtemp = params.BED|int %}
	{% set hotendtemp = params.HOTEND|int %}
	{% set filament_profile = params.FILID|string %}
	G21
	G90
	M83
	G28
	NEOPIXEL_DISPLAY LED=underglow TYPE=extruder_temp MODE=glow
	G1 Z20 F50
	M190 S{bedtemp}
	M109 S{hotendtemp}
	G28 Z
	RESPOND TYPE=command MSG="Print start"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_starting"
	
	
	{% if filament_profile == 'PLA_LOUD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=100
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% elif filid == 'PLA_STANDARD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	SET_PRESSURE_ADVANCE ADVANCE=0.035
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 0%"
	{% elif filid == 'ABS' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% endif %}
	
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=progress

[gcode_macro _PRINT_END]
gcode = 
	M400
	G92 E0
	G1 E-4.0 F3600
	G91
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="Print end"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_done"
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=glow
	
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 20) %}
	{% set z_safe = 20 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	TURN_OFF_HEATERS
	M107
	G90
	G0 X60 Y{max_y} F3600
	DISABLE_STEPPERS
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro PAUSE]
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL
	RESPOND TYPE=command MSG="Print pause"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_paused"

[gcode_macro RESUME]
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}
	RESPOND TYPE=command MSG="Print resume"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_resuming"

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
variable_park = True
gcode = 
	SET_FAN_SPEED FAN=boostFans SPEED=0
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	SDCARD_RESET_FILE
	CANCEL_PRINT_BASE
	RESPOND TYPE=command MSG="Print cancel"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_cancelled"

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[gcode_macro DISABLE_STEPPERS]
description = Disable the steppers
gcode = 
	M18
	RESPOND TYPE=command MSG="Steppers disabled"

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E30 F300
	G1 E15 F150
	M82
	RESPOND TYPE=command MSG="Load filament"

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E10 F300
	G1 E-40 F1800
	M82
	RESPOND TYPE=command MSG="Unload filament"

[gcode_macro _TALKETEMP]
gcode = 
	{% set TEMPE = params.TEMPE|int %}
	RESPOND TYPE=command MSG="Extruder temperature: {TEMPE}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="extruder_temperature_{TEMPE}"

[gcode_macro _TALKBTEMP]
gcode = 
	{% set TEMPB = params.TEMPB|int %}
	RESPOND TYPE=command MSG="Bed temperature: {TEMPB}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="bed_temperature_{TEMPB}"

[gcode_macro _TALKFILSET]
gcode = 
	{% set FILSET = params.FILSET|string %}
	RESPOND TYPE=command MSG="Slicer profile: {FILSET}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="slicer_filament_settings_{FILSET}"

[gcode_macro _TALKLHEIGHT]
gcode = 
	{% set LHEIGHT = params.LHEIGHT|string %}
	RESPOND TYPE=command MSG="Layer height: {LHEIGHT}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="layer_height_{LHEIGHT}"

[gcode_shell_command SPEAK]
command = espeak
timeout = 30
verbose = false

[delayed_gcode connected]
initial_duration = 1
gcode = 
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Printer_ready"

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[temperature_sensor SKR_temp]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 100

[temperature_sensor toolhead_MCU]
sensor_type = temperature_mcu
sensor_mcu = can0
min_temp = 0
max_temp = 100

[temperature_fan Stepper_Left]
pin = PC6
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA2
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_LEFT

[temperature_fan Stepper_Righ]
pin = PC7
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA3
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_RIGHT

[temperature_fan electronics_bay]
pin = pi:gpio24
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA0
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 35
max_speed = 1.0
min_speed = 0
gcode_id = ELECTRONICSBAY

[controller_fan Skr_cooling_fan]
pin = PB15
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
idle_timeout = 60
idle_speed = 1
stepper = stepper_x, stepper_y, stepper_z

[fan_generic boostFans]
pin = pi:gpio17
max_power = 1
shutdown_speed = 0
kick_start_time = 0.1
off_below = 0.2

[gcode_macro _POWER_OFF_PRINTER]
gcode = 
	{action_call_remote_method("set_device_power",
	device="mainpower",
	state="off")}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[output_pin BEEPER_pin]
pin = pi:gpio25
pwm = True
value = 0
shutdown_value = 0
cycle_time = 0.001

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	SET_PIN PIN=BEEPER_pin VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[endstop_phase]

[pause_resume]

[display_status]

[force_move]
enable_force_move = true

[respond]
default_type = echo

[mcu pi]
serial = /tmp/klipper_host_mcu

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00

[mcu can0]
canbus_uuid = cb71706bb3a2

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=1
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=1
	M300 P1000 S11
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Error_detected"

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_accel_to_decel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[safe_z_home]
home_xy_position = 120,120
speed = 20

[input_shaper]
shaper_freq_x = 73
shaper_type_x = mzv
shaper_freq_y = 87
shaper_type_y = zv

[stepper_x]
step_pin = PB13
dir_pin = PB12
enable_pin = !PB14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = can0:PB6
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PB10
dir_pin = PB2
enable_pin = !PB11
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = ^PC1
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PB0
dir_pin = !PC5
enable_pin = !PB1
rotation_distance = 8
microsteps = 32
endstop_pin = ^PC2
position_endstop = 0
position_max = 115
position_min = 0
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 3.0

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
interpolate = False
run_current = 0.4
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = can0:PD0
dir_pin = !can0:PD1
enable_pin = !can0:PD2
rotation_distance = 22.46572692
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
max_extrude_only_distance = 1400.0
max_extrude_only_velocity = 75.0
max_extrude_only_accel = 1500
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = can0:PB13
sensor_type = MAX31865
sensor_pin = can0:PA4
spi_bus = spi1
rtd_nominal_r = 100
rtd_reference_r = 430
rtd_num_of_wires = 2
min_extrude_temp = 180
max_temp = 450
min_temp = 0
control = pid
pid_kp = 24.513
pid_ki = 1.720
pid_kd = 87.327

[tmc2209 extruder]
uart_pin = can0:PA15
stealthchop_threshold = 0
run_current = .7

[heater_bed]
heater_pin = PC9
sensor_type = Generic 3950
sensor_pin = PC4
smooth_time = 3.0
min_temp = 0
max_temp = 120
pwm_cycle_time = 0.0166
control = pid
pid_kp = 53.726
pid_ki = 1.499
pid_kd = 481.519

[heater_fan hotend_fan]
pin = can0:PA0
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[fan]
pin = can0:PA1
kick_start_time = 0.25
cycle_time = 0.15
off_below = 0.10

[idle_timeout]
timeout = 1800

[bed_screws]
screw1 = 66,5
screw1_name = front screw
screw2 = 12,115
screw2_name = back left
screw3 = 115,115
screw3_name = back right
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 91 commands (v0.10.0-291-g4ce2d379 / gcc: (15:9-2019-q4-0ubuntu1) 9.2.1 20191025 (release) [ARM/arm-9-branch revision 277599] binutils: (2.34-4ubuntu1+13ubuntu1) 2.34)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'pi': Starting connect
Resetting prediction variance 31.073: freq=50167244 diff=1167329 stddev=51757.888
Resetting prediction variance 31.149: freq=52327691 diff=-774452 stddev=50000.000
Resetting prediction variance 31.201: freq=51255806 diff=-487283 stddev=50000.000
webhooks client 3045701872: New connection
Resetting prediction variance 31.253: freq=50754477 diff=-340159 stddev=50000.000
Loaded MCU 'pi' 111 commands (v0.10.0-613-gebc3b0de / gcc: (Raspbian 8.3.0-6+rpi1) 8.3.0 binutils: (GNU Binutils for Raspbian) 2.31.1)
MCU 'pi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
mcu 'can0': Starting CAN connect
Created a socket
Resetting prediction variance 31.919: freq=50480018 diff=-542772 stddev=50000.000
webhooks client 3045701872: Client info {'program': 'Moonraker', 'version': 'v0.7.1-758-g5a3b1b6'}
Resetting prediction variance 32.904: freq=50118369 diff=-276184 stddev=50000.000
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
MCU error during connect
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/mcu.py", line 772, in _mcu_identify
    self._canbus_iface)
  File "/home/pi/klipper/klippy/serialhdl.py", line 133, in connect_canbus
    self._error("Unable to connect")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/pi/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/mcu.py", line 782, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'can0': Unable to connect
Build file /home/pi/klipper/klippy/../.config(1616): Fri Nov 11 13:40:18 2022
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
# CONFIG_MACH_ATSAM is not set
CONFIG_MACH_ATSAMD=y
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsamd"
CONFIG_MCU="samd21g18a"
CONFIG_CLOCK_FREQ=48000000
CONFIG_USBSERIAL=y
CONFIG_FLASH_START=0x2000
CONFIG_FLASH_SIZE=0x40000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x8000
CONFIG_STACK_SIZE=512
CONFIG_ATSAMD_SELECT=y
CONFIG_HAVE_SERCOM=y
CONFIG_MACH_SAMD21G18=y
# CONFIG_MACH_SAMD21E18 is not set
# CONFIG_MACH_SAMD21E15 is not set
# CONFIG_MACH_SAMD51G19 is not set
# CONFIG_MACH_SAMD51J19 is not set
# CONFIG_MACH_SAMD51N19 is not set
# CONFIG_MACH_SAMD51P20 is not set
# CONFIG_MACH_SAME51J19 is not set
# CONFIG_MACH_SAME54P20 is not set
CONFIG_MACH_SAMD21=y
# CONFIG_CLOCK_REF_X32K is not set
CONFIG_CLOCK_REF_INTERNAL=y
CONFIG_FLASH_START_2000=y
# CONFIG_FLASH_START_4000 is not set
# CONFIG_FLASH_START_0000 is not set
CONFIG_ATSAMD_USB=y
# CONFIG_ATSAMD_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_CANBUS_FREQUENCY=500000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_GPIO_BITBANGING=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/pi/klipper/klippy/../out/klipper.dict(7376): Fri Nov 11 13:40:39 2022
Last MCU build version: v0.10.0-623-g5b1a6676
Last MCU build tools: gcc: (15:7-2018-q2-6) 7.3.1 20180622 (release) [ARM/embedded-7-branch revision 261907] binutils: (2.31.1-11+rpi1+11) 2.31.1
Last MCU build config: ADC_MAX=4095 CLOCK_FREQ=48000000 MCU=samd21g18a PWM_MAX=255 RESERVE_PINS_USB=PA24,PA25 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/pi/klipper/klippy/../out/klipper.elf(374400): Fri Nov 11 13:40:45 2022
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/klipper_config/printer.cfg', '-l', '/home/pi/klipper_logs/klippy.log', '-a', '/tmp/klippy_uds']
Git version: 'v0.10.0-623-g5b1a6676'
CPU: 4 core ARMv7 Processor rev 3 (v7l)
Python: '3.7.3 (default, Jan 22 2021, 20:04:44) \n[GCC 8.3.0]'
Start printer at Thu Nov 17 22:27:59 2022 (1668745679.6 36.3)
===== Config file =====
[adxl345]
cs_pin = can0:PB12
spi_software_sclk_pin = can0:PB10
spi_software_mosi_pin = can0:PB11
spi_software_miso_pin = can0:PB2
axes_map = x,y,z

[resonance_tester]
accel_chip = adxl345
probe_points = 
	60,60,20

[neopixel hat]
pin = PA8
chain_count = 18
color_order = GRB

[gcode_macro HAT_ON]
gcode = 
	SET_LED LED=hat GREEN=1 BLUE=1 RED=1

[gcode_macro HAT_OFF]
gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=0

[neopixel underglow]
pin = PD5
chain_count = 24
color_order = GRB

[gcode_macro UNDERGLOW_ON]
gcode = 
	SET_LED LED=underglow GREEN=1 BLUE=1 RED=1

[gcode_macro UNDERGLOW_OFF]
gcode = 
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=0

[gcode_macro NEOPIXEL_DISPLAY]
gcode = 
	{% set led = params.LED %}
	{% set type = params.TYPE %}
	{% set mode = params.MODE %}
	{% set my_neopixel = printer.configfile.config['neopixel ' ~ led] %}
	
	{% if mode == 'progress' %}
	{% for i in range(my_neopixel.chain_count|int) %}
	SET_LED_TEMPLATE LED={led} INDEX={i+1} TEMPLATE={'led_' ~ type ~ '_' ~ mode} param_led_num={i+1} param_led_total={my_neopixel.chain_count|int}
	{% endfor %}
	{% endif %}
	{% if mode == 'glow' %}
	SET_LED_TEMPLATE LED={led} TEMPLATE={'led_' ~ type ~ '_' ~ mode}
	{% endif %}

[display_template led_extruder_temp_glow]
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_extruder_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_bed_temp_glow]
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_bed_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_print_percent_glow]
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_print_percent_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	{% set led_ratio   = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_printer_speed_glow]
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_printer_speed_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	{% set led_ratio    = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[gcode_macro _PRINT_START]
gcode = 
	{% set bedtemp = params.BED|int %}
	{% set hotendtemp = params.HOTEND|int %}
	{% set filament_profile = params.FILID|string %}
	G21
	G90
	M83
	G28
	NEOPIXEL_DISPLAY LED=underglow TYPE=extruder_temp MODE=glow
	G1 Z20 F50
	M190 S{bedtemp}
	M109 S{hotendtemp}
	G28 Z
	RESPOND TYPE=command MSG="Print start"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_starting"
	
	
	{% if filament_profile == 'PLA_LOUD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=100
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% elif filid == 'PLA_STANDARD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	SET_PRESSURE_ADVANCE ADVANCE=0.035
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 0%"
	{% elif filid == 'ABS' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% endif %}
	
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=progress

[gcode_macro _PRINT_END]
gcode = 
	M400
	G92 E0
	G1 E-4.0 F3600
	G91
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="Print end"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_done"
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=glow
	
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 20) %}
	{% set z_safe = 20 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	TURN_OFF_HEATERS
	M107
	G90
	G0 X60 Y{max_y} F3600
	DISABLE_STEPPERS
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro PAUSE]
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL
	RESPOND TYPE=command MSG="Print pause"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_paused"

[gcode_macro RESUME]
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}
	RESPOND TYPE=command MSG="Print resume"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_resuming"

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
variable_park = True
gcode = 
	SET_FAN_SPEED FAN=boostFans SPEED=0
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	SDCARD_RESET_FILE
	CANCEL_PRINT_BASE
	RESPOND TYPE=command MSG="Print cancel"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_cancelled"

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[gcode_macro DISABLE_STEPPERS]
description = Disable the steppers
gcode = 
	M18
	RESPOND TYPE=command MSG="Steppers disabled"

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E30 F300
	G1 E15 F150
	M82
	RESPOND TYPE=command MSG="Load filament"

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E10 F300
	G1 E-40 F1800
	M82
	RESPOND TYPE=command MSG="Unload filament"

[gcode_macro _TALKETEMP]
gcode = 
	{% set TEMPE = params.TEMPE|int %}
	RESPOND TYPE=command MSG="Extruder temperature: {TEMPE}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="extruder_temperature_{TEMPE}"

[gcode_macro _TALKBTEMP]
gcode = 
	{% set TEMPB = params.TEMPB|int %}
	RESPOND TYPE=command MSG="Bed temperature: {TEMPB}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="bed_temperature_{TEMPB}"

[gcode_macro _TALKFILSET]
gcode = 
	{% set FILSET = params.FILSET|string %}
	RESPOND TYPE=command MSG="Slicer profile: {FILSET}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="slicer_filament_settings_{FILSET}"

[gcode_macro _TALKLHEIGHT]
gcode = 
	{% set LHEIGHT = params.LHEIGHT|string %}
	RESPOND TYPE=command MSG="Layer height: {LHEIGHT}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="layer_height_{LHEIGHT}"

[gcode_shell_command SPEAK]
command = espeak
timeout = 30
verbose = false

[delayed_gcode connected]
initial_duration = 1
gcode = 
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Printer_ready"

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[temperature_sensor SKR_temp]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 100

[temperature_sensor toolhead_MCU]
sensor_type = temperature_mcu
sensor_mcu = can0
min_temp = 0
max_temp = 100

[temperature_fan Stepper_Left]
pin = PC6
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA2
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_LEFT

[temperature_fan Stepper_Righ]
pin = PC7
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA3
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_RIGHT

[temperature_fan electronics_bay]
pin = pi:gpio24
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA0
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 35
max_speed = 1.0
min_speed = 0
gcode_id = ELECTRONICSBAY

[controller_fan Skr_cooling_fan]
pin = PB15
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
idle_timeout = 60
idle_speed = 1
stepper = stepper_x, stepper_y, stepper_z

[fan_generic boostFans]
pin = pi:gpio17
max_power = 1
shutdown_speed = 0
kick_start_time = 0.1
off_below = 0.2

[gcode_macro _POWER_OFF_PRINTER]
gcode = 
	{action_call_remote_method("set_device_power",
	device="mainpower",
	state="off")}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[output_pin BEEPER_pin]
pin = pi:gpio25
pwm = True
value = 0
shutdown_value = 0
cycle_time = 0.001

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	SET_PIN PIN=BEEPER_pin VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[endstop_phase]

[pause_resume]

[display_status]

[force_move]
enable_force_move = true

[respond]
default_type = echo

[mcu pi]
serial = /tmp/klipper_host_mcu

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00

[mcu can0]
canbus_uuid = cb71706bb3a2

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=1
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=1
	M300 P1000 S11
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Error_detected"

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_accel_to_decel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[safe_z_home]
home_xy_position = 120,120
speed = 20

[input_shaper]
shaper_freq_x = 73
shaper_type_x = mzv
shaper_freq_y = 87
shaper_type_y = zv

[stepper_x]
step_pin = PB13
dir_pin = PB12
enable_pin = !PB14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = can0:PB6
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PB10
dir_pin = PB2
enable_pin = !PB11
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = ^PC1
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PB0
dir_pin = !PC5
enable_pin = !PB1
rotation_distance = 8
microsteps = 32
endstop_pin = ^PC2
position_endstop = 0
position_max = 115
position_min = 0
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 3.0

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
interpolate = False
run_current = 0.4
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = can0:PD0
dir_pin = !can0:PD1
enable_pin = !can0:PD2
rotation_distance = 22.46572692
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
max_extrude_only_distance = 1400.0
max_extrude_only_velocity = 75.0
max_extrude_only_accel = 1500
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = can0:PB13
sensor_type = MAX31865
sensor_pin = can0:PA4
spi_bus = spi1
rtd_nominal_r = 100
rtd_reference_r = 430
rtd_num_of_wires = 2
min_extrude_temp = 180
max_temp = 450
min_temp = 0
control = pid
pid_kp = 24.513
pid_ki = 1.720
pid_kd = 87.327

[tmc2209 extruder]
uart_pin = can0:PA15
stealthchop_threshold = 0
run_current = .7

[heater_bed]
heater_pin = PC9
sensor_type = Generic 3950
sensor_pin = PC4
smooth_time = 3.0
min_temp = 0
max_temp = 120
pwm_cycle_time = 0.0166
control = pid
pid_kp = 53.726
pid_ki = 1.499
pid_kd = 481.519

[heater_fan hotend_fan]
pin = can0:PA0
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[fan]
pin = can0:PA1
kick_start_time = 0.25
cycle_time = 0.15
off_below = 0.10

[idle_timeout]
timeout = 1800

[bed_screws]
screw1 = 66,5
screw1_name = front screw
screw2 = 12,115
screw2_name = back left
screw3 = 115,115
screw3_name = back right
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 91 commands (v0.10.0-291-g4ce2d379 / gcc: (15:9-2019-q4-0ubuntu1) 9.2.1 20191025 (release) [ARM/arm-9-branch revision 277599] binutils: (2.34-4ubuntu1+13ubuntu1) 2.34)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'pi': Starting connect
mcu 'pi': got {'count': 132, 'sum': 157679, 'sumsq': 1093676, '#name': 'stats', '#sent_time': 39.10312005, '#receive_time': 39.103324865}
webhooks client 3046339792: New connection
Loaded MCU 'pi' 111 commands (v0.10.0-613-gebc3b0de / gcc: (Raspbian 8.3.0-6+rpi1) 8.3.0 binutils: (GNU Binutils for Raspbian) 2.31.1)
MCU 'pi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
mcu 'can0': Starting CAN connect
Created a socket
webhooks client 3046339792: Client info {'program': 'Moonraker', 'version': 'v0.7.1-758-g5a3b1b6'}
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
MCU error during connect
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/mcu.py", line 772, in _mcu_identify
    self._canbus_iface)
  File "/home/pi/klipper/klippy/serialhdl.py", line 133, in connect_canbus
    self._error("Unable to connect")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/pi/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/mcu.py", line 782, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'can0': Unable to connect
Build file /home/pi/klipper/klippy/../.config(1616): Fri Nov 11 13:40:18 2022
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
# CONFIG_MACH_ATSAM is not set
CONFIG_MACH_ATSAMD=y
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsamd"
CONFIG_MCU="samd21g18a"
CONFIG_CLOCK_FREQ=48000000
CONFIG_USBSERIAL=y
CONFIG_FLASH_START=0x2000
CONFIG_FLASH_SIZE=0x40000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x8000
CONFIG_STACK_SIZE=512
CONFIG_ATSAMD_SELECT=y
CONFIG_HAVE_SERCOM=y
CONFIG_MACH_SAMD21G18=y
# CONFIG_MACH_SAMD21E18 is not set
# CONFIG_MACH_SAMD21E15 is not set
# CONFIG_MACH_SAMD51G19 is not set
# CONFIG_MACH_SAMD51J19 is not set
# CONFIG_MACH_SAMD51N19 is not set
# CONFIG_MACH_SAMD51P20 is not set
# CONFIG_MACH_SAME51J19 is not set
# CONFIG_MACH_SAME54P20 is not set
CONFIG_MACH_SAMD21=y
# CONFIG_CLOCK_REF_X32K is not set
CONFIG_CLOCK_REF_INTERNAL=y
CONFIG_FLASH_START_2000=y
# CONFIG_FLASH_START_4000 is not set
# CONFIG_FLASH_START_0000 is not set
CONFIG_ATSAMD_USB=y
# CONFIG_ATSAMD_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_CANBUS_FREQUENCY=500000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_GPIO_BITBANGING=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/pi/klipper/klippy/../out/klipper.dict(7376): Fri Nov 11 13:40:39 2022
Last MCU build version: v0.10.0-623-g5b1a6676
Last MCU build tools: gcc: (15:7-2018-q2-6) 7.3.1 20180622 (release) [ARM/embedded-7-branch revision 261907] binutils: (2.31.1-11+rpi1+11) 2.31.1
Last MCU build config: ADC_MAX=4095 CLOCK_FREQ=48000000 MCU=samd21g18a PWM_MAX=255 RESERVE_PINS_USB=PA24,PA25 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/pi/klipper/klippy/../out/klipper.elf(374400): Fri Nov 11 13:40:45 2022
MCU 'pi' shutdown: Force shutdown command
clocksync state: mcu_freq=50000000 last_clock=103949107980 clock_est=(2059.434 102521355985 49999783.818) min_half_rtt=0.000052 min_rtt_time=1531.690 time_avg=2059.434(843.406) clock_avg=102521355985.067(42170115507.781) pred_variance=20627359.961 clock_adj=(22.195 50042598.500)
Dumping serial stats: bytes_write=13248 bytes_read=42849 bytes_retransmit=0 bytes_invalid=0 send_seq=2185 receive_seq=2185 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0
Dumping send queue 100 messages
Sent 0 1990.512451 1990.512451 6: seq: 15, get_clock
Sent 1 1991.496973 1991.496973 6: seq: 16, get_clock
Sent 2 1992.481598 1992.481598 6: seq: 17, get_clock
Sent 3 1993.466154 1993.466154 6: seq: 18, get_clock
Sent 4 1994.450768 1994.450768 6: seq: 19, get_clock
Sent 5 1995.435689 1995.435689 6: seq: 1a, get_clock
Sent 6 1996.420226 1996.420226 6: seq: 1b, get_clock
Sent 7 1997.405100 1997.405100 6: seq: 1c, get_clock
Sent 8 1998.389344 1998.389344 6: seq: 1d, get_clock
Sent 9 1999.373661 1999.373661 6: seq: 1e, get_clock
Sent 10 2000.358185 2000.358185 6: seq: 1f, get_clock
Sent 11 2001.343082 2001.343082 6: seq: 10, get_clock
Sent 12 2002.327596 2002.327596 6: seq: 11, get_clock
Sent 13 2003.311959 2003.311959 6: seq: 12, get_clock
Sent 14 2004.296196 2004.296196 6: seq: 13, get_clock
Sent 15 2005.281054 2005.281054 6: seq: 14, get_clock
Sent 16 2006.265482 2006.265482 6: seq: 15, get_clock
Sent 17 2007.249587 2007.249587 6: seq: 16, get_clock
Sent 18 2008.234548 2008.234548 6: seq: 17, get_clock
Sent 19 2009.218801 2009.218801 6: seq: 18, get_clock
Sent 20 2010.203051 2010.203051 6: seq: 19, get_clock
Sent 21 2011.187638 2011.187638 6: seq: 1a, get_clock
Sent 22 2012.172757 2012.172757 6: seq: 1b, get_clock
Sent 23 2013.157293 2013.157293 6: seq: 1c, get_clock
Sent 24 2014.142295 2014.142295 6: seq: 1d, get_clock
Sent 25 2015.127297 2015.127297 6: seq: 1e, get_clock
Sent 26 2016.111983 2016.111983 6: seq: 1f, get_clock
Sent 27 2017.096827 2017.096827 6: seq: 10, get_clock
Sent 28 2018.081164 2018.081164 6: seq: 11, get_clock
Sent 29 2019.065553 2019.065553 6: seq: 12, get_clock
Sent 30 2020.049773 2020.049773 6: seq: 13, get_clock
Sent 31 2021.033746 2021.033746 6: seq: 14, get_clock
Sent 32 2022.018128 2022.018128 6: seq: 15, get_clock
Sent 33 2023.002799 2023.002799 6: seq: 16, get_clock
Sent 34 2023.987883 2023.987883 6: seq: 17, get_clock
Sent 35 2024.972667 2024.972667 6: seq: 18, get_clock
Sent 36 2025.956843 2025.956843 6: seq: 19, get_clock
Sent 37 2026.941487 2026.941487 6: seq: 1a, get_clock
Sent 38 2027.926425 2027.926425 6: seq: 1b, get_clock
Sent 39 2028.911341 2028.911341 6: seq: 1c, get_clock
Sent 40 2029.896458 2029.896458 6: seq: 1d, get_clock
Sent 41 2030.880850 2030.880850 6: seq: 1e, get_clock
Sent 42 2031.865668 2031.865668 6: seq: 1f, get_clock
Sent 43 2032.849771 2032.849771 6: seq: 10, get_clock
Sent 44 2033.834156 2033.834156 6: seq: 11, get_clock
Sent 45 2034.819202 2034.819202 6: seq: 12, get_clock
Sent 46 2035.803952 2035.803952 6: seq: 13, get_clock
Sent 47 2036.788657 2036.788657 6: seq: 14, get_clock
Sent 48 2037.773295 2037.773295 6: seq: 15, get_clock
Sent 49 2038.758326 2038.758326 6: seq: 16, get_clock
Sent 50 2039.742697 2039.742697 6: seq: 17, get_clock
Sent 51 2040.727541 2040.727541 6: seq: 18, get_clock
Sent 52 2041.712229 2041.712229 6: seq: 19, get_clock
Sent 53 2042.696407 2042.696407 6: seq: 1a, get_clock
Sent 54 2043.681270 2043.681270 6: seq: 1b, get_clock
Sent 55 2044.665410 2044.665410 6: seq: 1c, get_clock
Sent 56 2045.649938 2045.649938 6: seq: 1d, get_clock
Sent 57 2046.634463 2046.634463 6: seq: 1e, get_clock
Sent 58 2047.618981 2047.618981 6: seq: 1f, get_clock
Sent 59 2048.603544 2048.603544 6: seq: 10, get_clock
Sent 60 2049.587927 2049.587927 6: seq: 11, get_clock
Sent 61 2050.572741 2050.572741 6: seq: 12, get_clock
Sent 62 2051.557560 2051.557560 6: seq: 13, get_clock
Sent 63 2052.542162 2052.542162 6: seq: 14, get_clock
Sent 64 2053.526776 2053.526776 6: seq: 15, get_clock
Sent 65 2054.511404 2054.511404 6: seq: 16, get_clock
Sent 66 2055.495971 2055.495971 6: seq: 17, get_clock
Sent 67 2056.480428 2056.480428 6: seq: 18, get_clock
Sent 68 2057.465159 2057.465159 6: seq: 19, get_clock
Sent 69 2058.449283 2058.449283 6: seq: 1a, get_clock
Sent 70 2059.434300 2059.434300 6: seq: 1b, get_clock
Sent 71 2060.418772 2060.418772 6: seq: 1c, get_clock
Sent 72 2061.403356 2061.403356 6: seq: 1d, get_clock
Sent 73 2062.387491 2062.387491 6: seq: 1e, get_clock
Sent 74 2063.372114 2063.372114 6: seq: 1f, get_clock
Sent 75 2064.356805 2064.356805 6: seq: 10, get_clock
Sent 76 2065.341220 2065.341220 6: seq: 11, get_clock
Sent 77 2066.325579 2066.325579 6: seq: 12, get_clock
Sent 78 2067.310194 2067.310194 6: seq: 13, get_clock
Sent 79 2068.294813 2068.294813 6: seq: 14, get_clock
Sent 80 2069.279040 2069.279040 6: seq: 15, get_clock
Sent 81 2070.263903 2070.263903 6: seq: 16, get_clock
Sent 82 2071.248256 2071.248256 6: seq: 17, get_clock
Sent 83 2072.232944 2072.232944 6: seq: 18, get_clock
Sent 84 2073.217141 2073.217141 6: seq: 19, get_clock
Sent 85 2074.202030 2074.202030 6: seq: 1a, get_clock
Sent 86 2075.186795 2075.186795 6: seq: 1b, get_clock
Sent 87 2076.171281 2076.171281 6: seq: 1c, get_clock
Sent 88 2077.156482 2077.156482 6: seq: 1d, get_clock
Sent 89 2078.141311 2078.141311 6: seq: 1e, get_clock
Sent 90 2079.126025 2079.126025 6: seq: 1f, get_clock
Sent 91 2080.110744 2080.110744 6: seq: 10, get_clock
Sent 92 2081.095549 2081.095549 6: seq: 11, get_clock
Sent 93 2082.080594 2082.080594 6: seq: 12, get_clock
Sent 94 2083.065384 2083.065384 6: seq: 13, get_clock
Sent 95 2084.049654 2084.049654 6: seq: 14, get_clock
Sent 96 2085.034749 2085.034749 6: seq: 15, get_clock
Sent 97 2086.019603 2086.019603 6: seq: 16, get_clock
Sent 98 2087.004503 2087.004503 6: seq: 17, get_clock
Sent 99 2087.989440 2087.989440 6: seq: 18, get_clock
Dumping receive queue 100 messages
Receive: 0 2007.250122 2007.249587 11: seq: 17, clock clock=1127889369
Receive: 1 2008.234828 2008.234548 11: seq: 18, clock clock=1177134566
Receive: 2 2009.219042 2009.218801 11: seq: 19, clock clock=1226346713
Receive: 3 2010.203340 2010.203051 11: seq: 1a, clock clock=1275559838
Receive: 4 2010.203359 2010.203051 13: seq: 1a, stats count=56 sum=29992 sumsq=245701
Receive: 5 2011.187923 2011.187638 11: seq: 1b, clock clock=1324787336
Receive: 6 2012.173087 2012.172757 11: seq: 1c, clock clock=1374047327
Receive: 7 2013.157719 2013.157293 11: seq: 1d, clock clock=1423275998
Receive: 8 2014.142556 2014.142295 11: seq: 1e, clock clock=1472521635
Receive: 9 2015.127680 2015.127297 11: seq: 1f, clock clock=1521773236
Receive: 10 2015.207297 2015.127297 13: seq: 1f, stats count=56 sum=26519 sumsq=213418
Receive: 11 2016.112227 2016.111983 11: seq: 10, clock clock=1571002280
Receive: 12 2017.097053 2017.096827 11: seq: 11, clock clock=1620246575
Receive: 13 2018.081652 2018.081164 11: seq: 12, clock clock=1669464029
Receive: 14 2019.066169 2019.065553 11: seq: 13, clock clock=1718698742
Receive: 15 2020.050031 2020.049773 11: seq: 14, clock clock=1767893338
Receive: 16 2020.307243 2020.049773 13: seq: 14, stats count=56 sum=24937 sumsq=171893
Receive: 17 2021.033881 2021.033746 11: seq: 15, clock clock=1817088664
Receive: 18 2022.018314 2022.018128 11: seq: 16, clock clock=1866308065
Receive: 19 2023.003205 2023.002799 11: seq: 17, clock clock=1915543253
Receive: 20 2023.988122 2023.987883 11: seq: 18, clock clock=1964796792
Receive: 21 2024.973174 2024.972667 11: seq: 19, clock clock=2014040875
Receive: 22 2025.307297 2024.972667 13: seq: 19, stats count=55 sum=22241 sumsq=121382
Receive: 23 2025.957380 2025.956843 11: seq: 1a, clock clock=2063250938
Receive: 24 2026.941701 2026.941487 11: seq: 1b, clock clock=2112476713
Receive: 25 2027.926638 2027.926425 11: seq: 1c, clock clock=2161723687
Receive: 26 2028.911546 2028.911341 11: seq: 1d, clock clock=2210968573
Receive: 27 2029.896943 2029.896458 11: seq: 1e, clock clock=2260226038
Receive: 28 2030.407379 2029.896458 13: seq: 1e, stats count=56 sum=27391 sumsq=224215
Receive: 29 2030.881226 2030.880850 11: seq: 1f, clock clock=2309445236
Receive: 30 2031.865903 2031.865668 11: seq: 10, clock clock=2358685343
Receive: 31 2032.850004 2032.849771 11: seq: 11, clock clock=2407891122
Receive: 32 2033.834374 2033.834156 11: seq: 12, clock clock=2457109833
Receive: 33 2034.819399 2034.819202 11: seq: 13, clock clock=2506361613
Receive: 34 2035.507376 2034.819202 13: seq: 13, stats count=56 sum=26242 sumsq=168486
Receive: 35 2035.804353 2035.803952 11: seq: 14, clock clock=2555602900
Receive: 36 2036.788970 2036.788657 11: seq: 15, clock clock=2604835005
Receive: 37 2037.773623 2037.773295 11: seq: 16, clock clock=2654067103
Receive: 38 2038.758618 2038.758326 11: seq: 17, clock clock=2703318222
Receive: 39 2039.742990 2039.742697 11: seq: 18, clock clock=2752538966
Receive: 40 2040.607393 2039.742697 13: seq: 18, stats count=56 sum=26554 sumsq=190067
Receive: 41 2040.727801 2040.727541 11: seq: 19, clock clock=2801779064
Receive: 42 2041.712503 2041.712229 11: seq: 1a, clock clock=2851012507
Receive: 43 2042.696871 2042.696407 11: seq: 1b, clock clock=2900222096
Receive: 44 2043.681868 2043.681270 11: seq: 1c, clock clock=2949480653
Receive: 45 2044.666000 2044.665410 11: seq: 1d, clock clock=2998688636
Receive: 46 2045.650337 2045.649938 11: seq: 1e, clock clock=3047901603
Receive: 47 2045.650355 2045.649938 13: seq: 1e, stats count=56 sum=29917 sumsq=242282
Receive: 48 2046.634889 2046.634463 11: seq: 1f, clock clock=3097125544
Receive: 49 2047.619197 2047.618981 11: seq: 10, clock clock=3146349466
Receive: 50 2048.603786 2048.603544 11: seq: 11, clock clock=3195579182
Receive: 51 2049.588146 2049.587927 11: seq: 12, clock clock=3244796571
Receive: 52 2050.573009 2050.572741 11: seq: 13, clock clock=3294040358
Receive: 53 2050.707448 2050.572741 13: seq: 13, stats count=56 sum=24182 sumsq=147802
Receive: 54 2051.557964 2051.557560 11: seq: 14, clock clock=3343278151
Receive: 55 2052.542500 2052.542162 11: seq: 15, clock clock=3392512969
Receive: 56 2053.527232 2053.526776 11: seq: 16, clock clock=3441739191
Receive: 57 2054.511699 2054.511404 11: seq: 17, clock clock=3490972712
Receive: 58 2055.496227 2055.495971 11: seq: 18, clock clock=3540198488
Receive: 59 2055.707599 2055.495971 13: seq: 18, stats count=55 sum=26705 sumsq=201185
Receive: 60 2056.480671 2056.480428 11: seq: 19, clock clock=3589420988
Receive: 61 2057.465579 2057.465159 11: seq: 1a, clock clock=3638656967
Receive: 62 2058.449721 2058.449283 11: seq: 1b, clock clock=3687861717
Receive: 63 2059.434549 2059.434300 11: seq: 1c, clock clock=3737114306
Receive: 64 2060.419187 2060.418772 11: seq: 1d, clock clock=3786339922
Receive: 65 2060.807543 2060.418772 13: seq: 1d, stats count=56 sum=26462 sumsq=189500
Receive: 66 2061.403740 2061.403356 11: seq: 1e, clock clock=3835568825
Receive: 67 2062.387795 2062.387491 11: seq: 1f, clock clock=3884775585
Receive: 68 2063.372537 2063.372114 11: seq: 10, clock clock=3934003695
Receive: 69 2064.357086 2064.356805 11: seq: 11, clock clock=3983236890
Receive: 70 2065.341413 2065.341220 11: seq: 12, clock clock=4032455639
Receive: 71 2065.907512 2065.341220 13: seq: 12, stats count=56 sum=25151 sumsq=170810
Receive: 72 2066.325807 2066.325579 11: seq: 13, clock clock=4081673006
Receive: 73 2067.310621 2067.310194 11: seq: 14, clock clock=4130909232
Receive: 74 2068.295046 2068.294813 11: seq: 15, clock clock=4180136380
Receive: 75 2069.279324 2069.279040 10: seq: 16, clock clock=4229349081
Receive: 76 2070.264147 2070.263903 10: seq: 17, clock clock=4278589450
Receive: 77 2070.907638 2070.263903 13: seq: 17, stats count=55 sum=25273 sumsq=171310
Receive: 78 2071.248495 2071.248256 10: seq: 18, clock clock=32839158
Receive: 79 2072.233187 2072.232944 10: seq: 19, clock clock=82073204
Receive: 80 2073.217428 2073.217141 10: seq: 1a, clock clock=131281817
Receive: 81 2074.202336 2074.202030 10: seq: 1b, clock clock=180527007
Receive: 82 2075.187167 2075.186795 11: seq: 1c, clock clock=229770691
Receive: 83 2076.007627 2075.186795 13: seq: 1c, stats count=56 sum=27246 sumsq=201157
Receive: 84 2076.171615 2076.171281 11: seq: 1d, clock clock=278992929
Receive: 85 2077.156728 2077.156482 11: seq: 1e, clock clock=328247489
Receive: 86 2078.141846 2078.141311 11: seq: 1f, clock clock=377496182
Receive: 87 2079.126329 2079.126025 11: seq: 10, clock clock=426723947
Receive: 88 2080.110958 2080.110744 11: seq: 11, clock clock=475959462
Receive: 89 2081.096133 2081.095549 11: seq: 12, clock clock=525216792
Receive: 90 2081.096151 2081.095549 13: seq: 12, stats count=56 sum=29450 sumsq=224266
Receive: 91 2082.080769 2082.080594 11: seq: 13, clock clock=574450449
Receive: 92 2083.065638 2083.065384 11: seq: 14, clock clock=623691717
Receive: 93 2084.049824 2084.049654 11: seq: 15, clock clock=672902424
Receive: 94 2085.035070 2085.034749 11: seq: 16, clock clock=722158250
Receive: 95 2086.019851 2086.019603 11: seq: 17, clock clock=771401378
Receive: 96 2086.107712 2086.019603 13: seq: 17, stats count=56 sum=24077 sumsq=153505
Receive: 97 2087.005042 2087.004503 11: seq: 18, clock clock=820653026
Receive: 98 2087.989683 2087.989440 11: seq: 19, clock clock=869892876
Receive: 99 2088.220599 2087.989440 12: seq: 19, shutdown clock=881438630 static_string_id=Force shutdown command
Transition to shutdown state: MCU 'pi' shutdown: Force shutdown command
Dumping 20 requests for client 3046339792
Received 2050.192924: b'{"id": 2817822480, "method": "info", "params": {}}'
Received 2052.193184: b'{"id": 2817807184, "method": "info", "params": {}}'
Received 2054.191436: b'{"id": 2817807216, "method": "info", "params": {}}'
Received 2056.199501: b'{"id": 2817806928, "method": "info", "params": {}}'
Received 2058.196370: b'{"id": 2817807184, "method": "info", "params": {}}'
Received 2060.194891: b'{"id": 2817806768, "method": "info", "params": {}}'
Received 2062.194134: b'{"id": 2817806576, "method": "info", "params": {}}'
Received 2064.189576: b'{"id": 2818266928, "method": "info", "params": {}}'
Received 2066.187203: b'{"id": 2818267792, "method": "info", "params": {}}'
Received 2068.187341: b'{"id": 2818266992, "method": "info", "params": {}}'
Received 2070.184510: b'{"id": 2817807344, "method": "info", "params": {}}'
Received 2072.199594: b'{"id": 2823223984, "method": "info", "params": {}}'
Received 2074.193659: b'{"id": 2799053936, "method": "info", "params": {}}'
Received 2076.190307: b'{"id": 2823224720, "method": "info", "params": {}}'
Received 2078.188782: b'{"id": 2817916784, "method": "info", "params": {}}'
Received 2080.184291: b'{"id": 2799053232, "method": "info", "params": {}}'
Received 2082.199651: b'{"id": 2817819888, "method": "info", "params": {}}'
Received 2084.194342: b'{"id": 2799051056, "method": "info", "params": {}}'
Received 2086.191316: b'{"id": 2817807344, "method": "info", "params": {}}'
Received 2088.186232: b'{"id": 2823235920, "method": "info", "params": {}}'
Reactor garbage collection: (2080.18504663, 245.181562742, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=64000000 last_clock=134471902436 clock_est=(2059.434 132644402387 63998871.185) min_half_rtt=0.000084 min_rtt_time=1953.099 time_avg=2059.434(843.406) clock_avg=132644402387.602(53977019595.467) pred_variance=2174808.628
Dumping serial stats: bytes_write=13124 bytes_read=42008 bytes_retransmit=9 bytes_invalid=0 send_seq=2171 receive_seq=2171 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0
Dumping send queue 100 messages
Sent 0 1991.496767 1991.496767 6: seq: 17, get_clock
Sent 1 1992.481411 1992.481411 6: seq: 18, get_clock
Sent 2 1993.465944 1993.465944 6: seq: 19, get_clock
Sent 3 1994.450555 1994.450555 6: seq: 1a, get_clock
Sent 4 1995.435521 1995.435521 6: seq: 1b, get_clock
Sent 5 1996.420013 1996.420013 6: seq: 1c, get_clock
Sent 6 1997.404888 1997.404888 6: seq: 1d, get_clock
Sent 7 1998.389156 1998.389156 6: seq: 1e, get_clock
Sent 8 1999.373445 1999.373445 6: seq: 1f, get_clock
Sent 9 2000.358007 2000.358007 6: seq: 10, get_clock
Sent 10 2001.342804 2001.342804 6: seq: 11, get_clock
Sent 11 2002.327374 2002.327374 6: seq: 12, get_clock
Sent 12 2003.311733 2003.311733 6: seq: 13, get_clock
Sent 13 2004.295970 2004.295970 6: seq: 14, get_clock
Sent 14 2005.280847 2005.280847 6: seq: 15, get_clock
Sent 15 2006.265256 2006.265256 6: seq: 16, get_clock
Sent 16 2007.249527 2007.249527 6: seq: 17, get_clock
Sent 17 2008.234493 2008.234493 6: seq: 18, get_clock
Sent 18 2009.218753 2009.218753 6: seq: 19, get_clock
Sent 19 2010.202997 2010.202997 6: seq: 1a, get_clock
Sent 20 2011.187592 2011.187592 6: seq: 1b, get_clock
Sent 21 2012.172717 2012.172717 6: seq: 1c, get_clock
Sent 22 2013.157250 2013.157250 6: seq: 1d, get_clock
Sent 23 2014.142083 2014.142083 6: seq: 1e, get_clock
Sent 24 2015.127040 2015.127040 6: seq: 1f, get_clock
Sent 25 2016.111818 2016.111818 6: seq: 10, get_clock
Sent 26 2017.096640 2017.096640 6: seq: 11, get_clock
Sent 27 2018.080944 2018.080944 6: seq: 12, get_clock
Sent 28 2019.065344 2019.065344 6: seq: 13, get_clock
Sent 29 2020.049742 2020.049742 6: seq: 14, get_clock
Sent 30 2021.033653 2021.033653 6: seq: 15, get_clock
Sent 31 2022.017960 2022.017960 6: seq: 16, get_clock
Sent 32 2023.002601 2023.002601 6: seq: 17, get_clock
Sent 33 2023.987695 2023.987695 6: seq: 18, get_clock
Sent 34 2024.972628 2024.972628 6: seq: 19, get_clock
Sent 35 2025.956805 2025.956805 6: seq: 1a, get_clock
Sent 36 2026.941294 2026.941294 6: seq: 1b, get_clock
Sent 37 2027.926235 2027.926235 6: seq: 1c, get_clock
Sent 38 2028.911146 2028.911146 6: seq: 1d, get_clock
Sent 39 2029.896220 2029.896220 6: seq: 1e, get_clock
Sent 40 2030.880654 2030.880654 6: seq: 1f, get_clock
Sent 41 2031.865457 2031.865457 6: seq: 10, get_clock
Sent 42 2032.849546 2032.849546 6: seq: 11, get_clock
Sent 43 2033.833959 2033.833959 6: seq: 12, get_clock
Sent 44 2034.819023 2034.819023 6: seq: 13, get_clock
Sent 45 2035.803713 2035.803713 6: seq: 14, get_clock
Sent 46 2036.788428 2036.788428 6: seq: 15, get_clock
Sent 47 2037.773112 2037.773112 6: seq: 16, get_clock
Sent 48 2038.758278 2038.758278 6: seq: 17, get_clock
Sent 49 2039.742644 2039.742644 6: seq: 18, get_clock
Sent 50 2040.727494 2040.727494 6: seq: 19, get_clock
Sent 51 2041.711993 2041.711993 6: seq: 1a, get_clock
Sent 52 2042.696173 2042.696173 6: seq: 1b, get_clock
Sent 53 2043.681040 2043.681040 6: seq: 1c, get_clock
Sent 54 2044.665154 2044.665154 6: seq: 1d, get_clock
Sent 55 2045.649709 2045.649709 6: seq: 1e, get_clock
Sent 56 2046.634235 2046.634235 6: seq: 1f, get_clock
Sent 57 2047.618934 2047.618934 6: seq: 10, get_clock
Sent 58 2048.603498 2048.603498 6: seq: 11, get_clock
Sent 59 2049.587891 2049.587891 6: seq: 12, get_clock
Sent 60 2050.572696 2050.572696 6: seq: 13, get_clock
Sent 61 2051.557147 2051.557147 6: seq: 14, get_clock
Sent 62 2052.541911 2052.541911 6: seq: 15, get_clock
Sent 63 2053.526550 2053.526550 6: seq: 16, get_clock
Sent 64 2054.511166 2054.511166 6: seq: 17, get_clock
Sent 65 2055.495741 2055.495741 6: seq: 18, get_clock
Sent 66 2056.480209 2056.480209 6: seq: 19, get_clock
Sent 67 2057.464931 2057.464931 6: seq: 1a, get_clock
Sent 68 2058.449088 2058.449088 6: seq: 1b, get_clock
Sent 69 2059.434013 2059.434013 6: seq: 1c, get_clock
Sent 70 2060.418515 2060.418515 6: seq: 1d, get_clock
Sent 71 2061.403109 2061.403109 6: seq: 1e, get_clock
Sent 72 2062.387439 2062.387439 6: seq: 1f, get_clock
Sent 73 2063.371901 2063.371901 6: seq: 10, get_clock
Sent 74 2064.356639 2064.356639 6: seq: 11, get_clock
Sent 75 2065.341091 2065.341091 6: seq: 12, get_clock
Sent 76 2066.325544 2066.325544 6: seq: 13, get_clock
Sent 77 2067.310026 2067.310026 6: seq: 14, get_clock
Sent 78 2068.294589 2068.294589 6: seq: 15, get_clock
Sent 79 2069.278832 2069.278832 6: seq: 16, get_clock
Sent 80 2070.263687 2070.263687 6: seq: 17, get_clock
Sent 81 2071.248042 2071.248042 6: seq: 18, get_clock
Sent 82 2072.232714 2072.232714 6: seq: 19, get_clock
Sent 83 2073.216934 2073.216934 6: seq: 1a, get_clock
Sent 84 2074.201811 2074.201811 6: seq: 1b, get_clock
Sent 85 2075.186589 2075.186589 6: seq: 1c, get_clock
Sent 86 2076.171075 2076.171075 6: seq: 1d, get_clock
Sent 87 2077.156293 2077.156293 6: seq: 1e, get_clock
Sent 88 2078.141098 2078.141098 6: seq: 1f, get_clock
Sent 89 2079.125840 2079.125840 6: seq: 10, get_clock
Sent 90 2080.110540 2080.110540 6: seq: 11, get_clock
Sent 91 2081.095333 2081.095333 6: seq: 12, get_clock
Sent 92 2082.080438 2082.080438 6: seq: 13, get_clock
Sent 93 2083.065170 2083.065170 6: seq: 14, get_clock
Sent 94 2084.049504 2084.049504 6: seq: 15, get_clock
Sent 95 2085.034526 2085.034526 6: seq: 16, get_clock
Sent 96 2086.019389 2086.019389 6: seq: 17, get_clock
Sent 97 2087.004289 2087.004289 6: seq: 18, get_clock
Sent 98 2087.989203 2087.989203 6: seq: 19, get_clock
Sent 99 2088.231503 2088.231503 6: seq: 1a, emergency_stop
Dumping receive queue 100 messages
Receive: 0 2007.249801 2007.249527 11: seq: 18, clock clock=455635234
Receive: 1 2008.234777 2008.234493 11: seq: 19, clock clock=518672406
Receive: 2 2009.219042 2009.218753 11: seq: 1a, clock clock=581663292
Receive: 3 2010.203325 2010.202997 11: seq: 1b, clock clock=644654162
Receive: 4 2011.187952 2011.187592 11: seq: 1c, clock clock=707666862
Receive: 5 2011.864668 2011.187592 13: seq: 1c, stats count=67 sum=38823 sumsq=130965
Receive: 6 2012.173083 2012.172717 11: seq: 1d, clock clock=770714222
Receive: 7 2013.157559 2013.157250 11: seq: 1e, clock clock=833722711
Receive: 8 2014.142431 2014.142083 11: seq: 1f, clock clock=896752290
Receive: 9 2015.127535 2015.127040 11: seq: 10, clock clock=959789362
Receive: 10 2016.112110 2016.111818 11: seq: 11, clock clock=1022810892
Receive: 11 2016.864776 2016.111818 13: seq: 11, stats count=67 sum=38823 sumsq=130965
Receive: 12 2017.096944 2017.096640 11: seq: 12, clock clock=1085838610
Receive: 13 2018.081299 2018.080944 11: seq: 13, clock clock=1148833682
Receive: 14 2019.065637 2019.065344 11: seq: 14, clock clock=1211833859
Receive: 15 2020.049946 2020.049742 11: seq: 15, clock clock=1274833560
Receive: 16 2021.033832 2021.033653 11: seq: 16, clock clock=1337801807
Receive: 17 2021.864903 2021.033653 13: seq: 16, stats count=67 sum=38823 sumsq=130965
Receive: 18 2022.018210 2022.017960 11: seq: 17, clock clock=1400797284
Receive: 19 2023.002904 2023.002601 11: seq: 18, clock clock=1463813398
Receive: 20 2023.987964 2023.987695 11: seq: 19, clock clock=1526858394
Receive: 21 2024.972877 2024.972628 11: seq: 1a, clock clock=1589893306
Receive: 22 2025.957080 2025.956805 11: seq: 1b, clock clock=1652879424
Receive: 23 2026.864968 2025.956805 13: seq: 1b, stats count=67 sum=38823 sumsq=130965
Receive: 24 2026.941602 2026.941294 11: seq: 1c, clock clock=1715887730
Receive: 25 2027.926539 2027.926235 11: seq: 1d, clock clock=1778920886
Receive: 26 2028.911456 2028.911146 11: seq: 1e, clock clock=1841954075
Receive: 27 2029.896584 2029.896220 11: seq: 1f, clock clock=1904998246
Receive: 28 2030.880931 2030.880654 11: seq: 10, clock clock=1967999979
Receive: 29 2031.865041 2030.880654 13: seq: 10, stats count=67 sum=38823 sumsq=130965
Receive: 30 2031.865773 2031.865457 11: seq: 11, clock clock=2031027739
Receive: 31 2032.849919 2032.849546 11: seq: 12, clock clock=2094011036
Receive: 32 2033.834206 2033.833959 11: seq: 13, clock clock=2157008236
Receive: 33 2034.819259 2034.819023 11: seq: 14, clock clock=2220050782
Receive: 34 2035.803988 2035.803713 11: seq: 15, clock clock=2283071406
Receive: 35 2036.788693 2036.788428 11: seq: 16, clock clock=2346091352
Receive: 36 2036.865161 2036.788428 13: seq: 16, stats count=70 sum=41741 sumsq=147745
Receive: 37 2037.773357 2037.773112 11: seq: 17, clock clock=2409109438
Receive: 38 2038.758620 2038.758278 11: seq: 18, clock clock=2472159694
Receive: 39 2039.742872 2039.742644 11: seq: 19, clock clock=2535158174
Receive: 40 2040.727801 2040.727494 11: seq: 1a, clock clock=2598187934
Receive: 41 2041.712274 2041.711993 11: seq: 1b, clock clock=2661193987
Receive: 42 2041.865207 2041.711993 13: seq: 1b, stats count=67 sum=38823 sumsq=130965
Receive: 43 2042.696457 2042.696173 11: seq: 1c, clock clock=2724180310
Receive: 44 2043.681353 2043.681040 11: seq: 1d, clock clock=2787211376
Receive: 45 2044.665516 2044.665154 11: seq: 1e, clock clock=2850194672
Receive: 46 2045.650006 2045.649709 11: seq: 1f, clock clock=2913203606
Receive: 47 2046.634556 2046.634235 11: seq: 10, clock clock=2976212123
Receive: 48 2046.865299 2046.634235 13: seq: 10, stats count=67 sum=38823 sumsq=130965
Receive: 49 2047.619198 2047.618934 11: seq: 11, clock clock=3039231287
Receive: 50 2048.603752 2048.603498 11: seq: 12, clock clock=3102242028
Receive: 51 2049.588155 2049.587891 11: seq: 13, clock clock=3165242316
Receive: 52 2050.572931 2050.572696 11: seq: 14, clock clock=3228269224
Receive: 53 2051.557592 2051.557147 11: seq: 15, clock clock=3291284456
Receive: 54 2051.865403 2051.557147 13: seq: 15, stats count=67 sum=38823 sumsq=130965
Receive: 55 2052.542209 2052.541911 11: seq: 16, clock clock=3354296803
Receive: 56 2053.526842 2053.526550 11: seq: 17, clock clock=3417312174
Receive: 57 2054.511592 2054.511166 11: seq: 18, clock clock=3480326618
Receive: 58 2055.496056 2055.495741 11: seq: 19, clock clock=3543338623
Receive: 59 2056.480473 2056.480209 11: seq: 1a, clock clock=3606342927
Receive: 60 2056.865466 2056.480209 13: seq: 1a, stats count=67 sum=38823 sumsq=130965
Receive: 61 2057.465209 2057.464931 11: seq: 1b, clock clock=3669364079
Receive: 62 2058.449364 2058.449088 11: seq: 1c, clock clock=3732348608
Receive: 63 2059.434302 2059.434013 11: seq: 1d, clock clock=3795383878
Receive: 64 2060.418830 2060.418515 11: seq: 1e, clock clock=3858391163
Receive: 65 2061.403417 2061.403109 11: seq: 1f, clock clock=3921403232
Receive: 66 2061.865563 2061.403109 13: seq: 1f, stats count=67 sum=38823 sumsq=130965
Receive: 67 2062.387752 2062.387439 11: seq: 10, clock clock=3984399186
Receive: 68 2063.372253 2063.371901 11: seq: 11, clock clock=4047403212
Receive: 69 2064.356940 2064.356639 11: seq: 12, clock clock=4110426066
Receive: 70 2065.341325 2065.341091 11: seq: 13, clock clock=4173429011
Receive: 71 2066.325819 2066.325544 10: seq: 14, clock clock=4236432788
Receive: 72 2066.865637 2066.325544 13: seq: 14, stats count=67 sum=38795 sumsq=130540
Receive: 73 2067.310272 2067.310026 10: seq: 15, clock clock=4471032
Receive: 74 2068.294941 2068.294589 10: seq: 16, clock clock=67482788
Receive: 75 2069.279110 2069.278832 10: seq: 17, clock clock=130473487
Receive: 76 2070.264038 2070.263687 10: seq: 18, clock clock=193504907
Receive: 77 2071.248389 2071.248042 11: seq: 19, clock clock=256500602
Receive: 78 2071.865756 2071.248042 13: seq: 19, stats count=67 sum=38711 sumsq=129265
Receive: 79 2072.233069 2072.232714 11: seq: 1a, clock clock=319519487
Receive: 80 2073.217265 2073.216934 11: seq: 1b, clock clock=382510486
Receive: 81 2074.202116 2074.201811 11: seq: 1c, clock clock=445538779
Receive: 82 2075.186874 2075.186589 11: seq: 1d, clock clock=508562939
Receive: 83 2076.171369 2076.171075 11: seq: 1e, clock clock=571568880
Receive: 84 2076.865842 2076.171075 13: seq: 1e, stats count=67 sum=38831 sumsq=131048
Receive: 85 2077.156602 2077.156293 11: seq: 1f, clock clock=634621600
Receive: 86 2078.141398 2078.141098 11: seq: 10, clock clock=697648240
Receive: 87 2079.126147 2079.125840 11: seq: 11, clock clock=760670326
Receive: 88 2080.110861 2080.110540 11: seq: 12, clock clock=823690331
Receive: 89 2081.095624 2081.095333 11: seq: 13, clock clock=886715920
Receive: 90 2081.865915 2081.095333 13: seq: 13, stats count=67 sum=38823 sumsq=130965
Receive: 91 2082.080685 2082.080438 11: seq: 14, clock clock=949760710
Receive: 92 2083.065519 2083.065170 11: seq: 15, clock clock=1012783818
Receive: 93 2084.049744 2084.049504 11: seq: 16, clock clock=1075778550
Receive: 94 2085.034898 2085.034526 11: seq: 17, clock clock=1138822778
Receive: 95 2086.019738 2086.019389 11: seq: 18, clock clock=1201849846
Receive: 96 2086.866061 2086.019389 13: seq: 18, stats count=67 sum=38823 sumsq=130965
Receive: 97 2087.004597 2087.004289 11: seq: 19, clock clock=1264882442
Receive: 98 2087.989565 2087.989203 11: seq: 1a, clock clock=1327916260
Receive: 99 2088.231711 2088.231503 12: seq: 1b, shutdown clock=1343422148 static_string_id=Command request
webhooks client 3046339792: Disconnected
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/klipper_config/printer.cfg', '-l', '/home/pi/klipper_logs/klippy.log', '-a', '/tmp/klippy_uds']
Git version: 'v0.10.0-623-g5b1a6676'
CPU: 4 core ARMv7 Processor rev 3 (v7l)
Python: '3.7.3 (default, Jan 22 2021, 20:04:44) \n[GCC 8.3.0]'
Start printer at Thu Nov 17 23:07:49 2022 (1668748069.6 29.1)
===== Config file =====
[adxl345]
cs_pin = can0:PB12
spi_software_sclk_pin = can0:PB10
spi_software_mosi_pin = can0:PB11
spi_software_miso_pin = can0:PB2
axes_map = x,y,z

[resonance_tester]
accel_chip = adxl345
probe_points = 
	60,60,20

[neopixel hat]
pin = PA8
chain_count = 18
color_order = GRB

[gcode_macro HAT_ON]
gcode = 
	SET_LED LED=hat GREEN=1 BLUE=1 RED=1

[gcode_macro HAT_OFF]
gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=0

[neopixel underglow]
pin = PD5
chain_count = 24
color_order = GRB

[gcode_macro UNDERGLOW_ON]
gcode = 
	SET_LED LED=underglow GREEN=1 BLUE=1 RED=1

[gcode_macro UNDERGLOW_OFF]
gcode = 
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=0

[gcode_macro NEOPIXEL_DISPLAY]
gcode = 
	{% set led = params.LED %}
	{% set type = params.TYPE %}
	{% set mode = params.MODE %}
	{% set my_neopixel = printer.configfile.config['neopixel ' ~ led] %}
	
	{% if mode == 'progress' %}
	{% for i in range(my_neopixel.chain_count|int) %}
	SET_LED_TEMPLATE LED={led} INDEX={i+1} TEMPLATE={'led_' ~ type ~ '_' ~ mode} param_led_num={i+1} param_led_total={my_neopixel.chain_count|int}
	{% endfor %}
	{% endif %}
	{% if mode == 'glow' %}
	SET_LED_TEMPLATE LED={led} TEMPLATE={'led_' ~ type ~ '_' ~ mode}
	{% endif %}

[display_template led_extruder_temp_glow]
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_extruder_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_bed_temp_glow]
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_bed_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_print_percent_glow]
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_print_percent_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	{% set led_ratio   = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_printer_speed_glow]
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_printer_speed_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	{% set led_ratio    = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[gcode_macro _PRINT_START]
gcode = 
	{% set bedtemp = params.BED|int %}
	{% set hotendtemp = params.HOTEND|int %}
	{% set filament_profile = params.FILID|string %}
	G21
	G90
	M83
	G28
	NEOPIXEL_DISPLAY LED=underglow TYPE=extruder_temp MODE=glow
	G1 Z20 F50
	M190 S{bedtemp}
	M109 S{hotendtemp}
	G28 Z
	RESPOND TYPE=command MSG="Print start"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_starting"
	
	
	{% if filament_profile == 'PLA_LOUD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=100
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% elif filid == 'PLA_STANDARD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	SET_PRESSURE_ADVANCE ADVANCE=0.035
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 0%"
	{% elif filid == 'ABS' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% endif %}
	
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=progress

[gcode_macro _PRINT_END]
gcode = 
	M400
	G92 E0
	G1 E-4.0 F3600
	G91
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="Print end"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_done"
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=glow
	
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 20) %}
	{% set z_safe = 20 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	TURN_OFF_HEATERS
	M107
	G90
	G0 X60 Y{max_y} F3600
	DISABLE_STEPPERS
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro PAUSE]
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL
	RESPOND TYPE=command MSG="Print pause"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_paused"

[gcode_macro RESUME]
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}
	RESPOND TYPE=command MSG="Print resume"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_resuming"

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
variable_park = True
gcode = 
	SET_FAN_SPEED FAN=boostFans SPEED=0
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	SDCARD_RESET_FILE
	CANCEL_PRINT_BASE
	RESPOND TYPE=command MSG="Print cancel"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_cancelled"

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[gcode_macro DISABLE_STEPPERS]
description = Disable the steppers
gcode = 
	M18
	RESPOND TYPE=command MSG="Steppers disabled"

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E30 F300
	G1 E15 F150
	M82
	RESPOND TYPE=command MSG="Load filament"

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E10 F300
	G1 E-40 F1800
	M82
	RESPOND TYPE=command MSG="Unload filament"

[gcode_macro _TALKETEMP]
gcode = 
	{% set TEMPE = params.TEMPE|int %}
	RESPOND TYPE=command MSG="Extruder temperature: {TEMPE}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="extruder_temperature_{TEMPE}"

[gcode_macro _TALKBTEMP]
gcode = 
	{% set TEMPB = params.TEMPB|int %}
	RESPOND TYPE=command MSG="Bed temperature: {TEMPB}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="bed_temperature_{TEMPB}"

[gcode_macro _TALKFILSET]
gcode = 
	{% set FILSET = params.FILSET|string %}
	RESPOND TYPE=command MSG="Slicer profile: {FILSET}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="slicer_filament_settings_{FILSET}"

[gcode_macro _TALKLHEIGHT]
gcode = 
	{% set LHEIGHT = params.LHEIGHT|string %}
	RESPOND TYPE=command MSG="Layer height: {LHEIGHT}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="layer_height_{LHEIGHT}"

[gcode_shell_command SPEAK]
command = espeak
timeout = 30
verbose = false

[delayed_gcode connected]
initial_duration = 1
gcode = 
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Printer_ready"

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[temperature_sensor SKR_temp]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 100

[temperature_sensor toolhead_MCU]
sensor_type = temperature_mcu
sensor_mcu = can0
min_temp = 0
max_temp = 100

[temperature_fan Stepper_Left]
pin = PC6
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA2
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_LEFT

[temperature_fan Stepper_Righ]
pin = PC7
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA3
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_RIGHT

[temperature_fan electronics_bay]
pin = pi:gpio24
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA0
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 35
max_speed = 1.0
min_speed = 0
gcode_id = ELECTRONICSBAY

[controller_fan Skr_cooling_fan]
pin = PB15
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
idle_timeout = 60
idle_speed = 1
stepper = stepper_x, stepper_y, stepper_z

[fan_generic boostFans]
pin = pi:gpio17
max_power = 1
shutdown_speed = 0
kick_start_time = 0.1
off_below = 0.2

[gcode_macro _POWER_OFF_PRINTER]
gcode = 
	{action_call_remote_method("set_device_power",
	device="mainpower",
	state="off")}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[output_pin BEEPER_pin]
pin = pi:gpio25
pwm = True
value = 0
shutdown_value = 0
cycle_time = 0.001

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	SET_PIN PIN=BEEPER_pin VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[endstop_phase]

[pause_resume]

[display_status]

[force_move]
enable_force_move = true

[respond]
default_type = echo

[mcu pi]
serial = /tmp/klipper_host_mcu

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00

[mcu can0]
canbus_uuid = cb71706bb3a2

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=1
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=1
	M300 P1000 S11
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Error_detected"

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_accel_to_decel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[safe_z_home]
home_xy_position = 120,120
speed = 20

[input_shaper]
shaper_freq_x = 73
shaper_type_x = mzv
shaper_freq_y = 87
shaper_type_y = zv

[stepper_x]
step_pin = PB13
dir_pin = PB12
enable_pin = !PB14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = can0:PB6
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PB10
dir_pin = PB2
enable_pin = !PB11
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = ^PC1
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PB0
dir_pin = !PC5
enable_pin = !PB1
rotation_distance = 8
microsteps = 32
endstop_pin = ^PC2
position_endstop = 0
position_max = 115
position_min = 0
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 3.0

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
interpolate = False
run_current = 0.4
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = can0:PD0
dir_pin = !can0:PD1
enable_pin = !can0:PD2
rotation_distance = 22.46572692
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
max_extrude_only_distance = 1400.0
max_extrude_only_velocity = 75.0
max_extrude_only_accel = 1500
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = can0:PB13
sensor_type = MAX31865
sensor_pin = can0:PA4
spi_bus = spi1
rtd_nominal_r = 100
rtd_reference_r = 430
rtd_num_of_wires = 2
min_extrude_temp = 180
max_temp = 450
min_temp = 0
control = pid
pid_kp = 24.513
pid_ki = 1.720
pid_kd = 87.327

[tmc2209 extruder]
uart_pin = can0:PA15
stealthchop_threshold = 0
run_current = .7

[heater_bed]
heater_pin = PC9
sensor_type = Generic 3950
sensor_pin = PC4
smooth_time = 3.0
min_temp = 0
max_temp = 120
pwm_cycle_time = 0.0166
control = pid
pid_kp = 53.726
pid_ki = 1.499
pid_kd = 481.519

[heater_fan hotend_fan]
pin = can0:PA0
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[fan]
pin = can0:PA1
kick_start_time = 0.25
cycle_time = 0.15
off_below = 0.10

[idle_timeout]
timeout = 1800

[bed_screws]
screw1 = 66,5
screw1_name = front screw
screw2 = 12,115
screw2_name = back left
screw3 = 115,115
screw3_name = back right
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 91 commands (v0.10.0-291-g4ce2d379 / gcc: (15:9-2019-q4-0ubuntu1) 9.2.1 20191025 (release) [ARM/arm-9-branch revision 277599] binutils: (2.34-4ubuntu1+13ubuntu1) 2.34)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'pi': Starting connect
webhooks client 3045745776: New connection
Loaded MCU 'pi' 111 commands (v0.10.0-613-gebc3b0de / gcc: (Raspbian 8.3.0-6+rpi1) 8.3.0 binutils: (GNU Binutils for Raspbian) 2.31.1)
MCU 'pi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
mcu 'can0': Starting CAN connect
Created a socket
webhooks client 3045745776: Client info {'program': 'Moonraker', 'version': 'v0.7.1-758-g5a3b1b6'}
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
b'Got error -1 in can write: (105)No buffer space available'
mcu 'can0': Timeout on connect
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
mcu 'can0': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 68, in _get_identify_data
    params = self.send_with_response(msg, 'identify_response')
  File "/home/pi/klipper/klippy/serialhdl.py", line 259, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 317, in get_response
    cmd_queue)
  File "/home/pi/klipper/klippy/serialhdl.py", line 251, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Serial connection closed
Created a socket
mcu 'can0': Unable to open CAN port: Failed to transmit: [Errno 105] No buffer space available
MCU error during connect
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/mcu.py", line 772, in _mcu_identify
    self._canbus_iface)
  File "/home/pi/klipper/klippy/serialhdl.py", line 133, in connect_canbus
    self._error("Unable to connect")
  File "/home/pi/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'can0': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/pi/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/pi/klipper/klippy/mcu.py", line 782, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'can0': Unable to connect
Build file /home/pi/klipper/klippy/../.config(1616): Fri Nov 11 13:40:18 2022
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
# CONFIG_MACH_ATSAM is not set
CONFIG_MACH_ATSAMD=y
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsamd"
CONFIG_MCU="samd21g18a"
CONFIG_CLOCK_FREQ=48000000
CONFIG_USBSERIAL=y
CONFIG_FLASH_START=0x2000
CONFIG_FLASH_SIZE=0x40000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x8000
CONFIG_STACK_SIZE=512
CONFIG_ATSAMD_SELECT=y
CONFIG_HAVE_SERCOM=y
CONFIG_MACH_SAMD21G18=y
# CONFIG_MACH_SAMD21E18 is not set
# CONFIG_MACH_SAMD21E15 is not set
# CONFIG_MACH_SAMD51G19 is not set
# CONFIG_MACH_SAMD51J19 is not set
# CONFIG_MACH_SAMD51N19 is not set
# CONFIG_MACH_SAMD51P20 is not set
# CONFIG_MACH_SAME51J19 is not set
# CONFIG_MACH_SAME54P20 is not set
CONFIG_MACH_SAMD21=y
# CONFIG_CLOCK_REF_X32K is not set
CONFIG_CLOCK_REF_INTERNAL=y
CONFIG_FLASH_START_2000=y
# CONFIG_FLASH_START_4000 is not set
# CONFIG_FLASH_START_0000 is not set
CONFIG_ATSAMD_USB=y
# CONFIG_ATSAMD_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_CANBUS_FREQUENCY=500000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_GPIO_BITBANGING=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/pi/klipper/klippy/../out/klipper.dict(7376): Fri Nov 11 13:40:39 2022
Last MCU build version: v0.10.0-623-g5b1a6676
Last MCU build tools: gcc: (15:7-2018-q2-6) 7.3.1 20180622 (release) [ARM/embedded-7-branch revision 261907] binutils: (2.31.1-11+rpi1+11) 2.31.1
Last MCU build config: ADC_MAX=4095 CLOCK_FREQ=48000000 MCU=samd21g18a PWM_MAX=255 RESERVE_PINS_USB=PA24,PA25 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/pi/klipper/klippy/../out/klipper.elf(374400): Fri Nov 11 13:40:45 2022
MCU 'pi' shutdown: Force shutdown command
clocksync state: mcu_freq=50000000 last_clock=23787483055 clock_est=(456.196 22359768231 49999960.250) min_half_rtt=0.000055 min_rtt_time=200.214 time_avg=456.196(843.437) clock_avg=22359768231.211(42171822277.038) pred_variance=19168633.796 clock_adj=(2126.359 49997447.500)
Dumping serial stats: bytes_write=3528 bytes_read=12913 bytes_retransmit=0 bytes_invalid=0 send_seq=565 receive_seq=565 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0
Dumping send queue 100 messages
Sent 0 387.273778 387.273778 6: seq: 11, get_clock
Sent 1 388.258280 388.258280 6: seq: 12, get_clock
Sent 2 389.243128 389.243128 6: seq: 13, get_clock
Sent 3 390.227741 390.227741 6: seq: 14, get_clock
Sent 4 391.212099 391.212099 6: seq: 15, get_clock
Sent 5 392.196886 392.196886 6: seq: 16, get_clock
Sent 6 393.181886 393.181886 6: seq: 17, get_clock
Sent 7 394.166585 394.166585 6: seq: 18, get_clock
Sent 8 395.150787 395.150787 6: seq: 19, get_clock
Sent 9 396.135311 396.135311 6: seq: 1a, get_clock
Sent 10 397.119559 397.119559 6: seq: 1b, get_clock
Sent 11 398.104169 398.104169 6: seq: 1c, get_clock
Sent 12 399.088913 399.088913 6: seq: 1d, get_clock
Sent 13 400.073634 400.073634 6: seq: 1e, get_clock
Sent 14 401.058308 401.058308 6: seq: 1f, get_clock
Sent 15 402.042357 402.042357 6: seq: 10, get_clock
Sent 16 403.027175 403.027175 6: seq: 11, get_clock
Sent 17 404.011648 404.011648 6: seq: 12, get_clock
Sent 18 404.996489 404.996489 6: seq: 13, get_clock
Sent 19 405.980706 405.980706 6: seq: 14, get_clock
Sent 20 406.965747 406.965747 6: seq: 15, get_clock
Sent 21 407.950009 407.950009 6: seq: 16, get_clock
Sent 22 408.934669 408.934669 6: seq: 17, get_clock
Sent 23 409.919387 409.919387 6: seq: 18, get_clock
Sent 24 410.903475 410.903475 6: seq: 19, get_clock
Sent 25 411.887690 411.887690 6: seq: 1a, get_clock
Sent 26 412.872121 412.872121 6: seq: 1b, get_clock
Sent 27 413.857082 413.857082 6: seq: 1c, get_clock
Sent 28 414.841388 414.841388 6: seq: 1d, get_clock
Sent 29 415.826208 415.826208 6: seq: 1e, get_clock
Sent 30 416.810553 416.810553 6: seq: 1f, get_clock
Sent 31 417.795105 417.795105 6: seq: 10, get_clock
Sent 32 418.779406 418.779406 6: seq: 11, get_clock
Sent 33 419.763988 419.763988 6: seq: 12, get_clock
Sent 34 420.748149 420.748149 6: seq: 13, get_clock
Sent 35 421.733084 421.733084 6: seq: 14, get_clock
Sent 36 422.717645 422.717645 6: seq: 15, get_clock
Sent 37 423.701774 423.701774 6: seq: 16, get_clock
Sent 38 424.686322 424.686322 6: seq: 17, get_clock
Sent 39 425.671250 425.671250 6: seq: 18, get_clock
Sent 40 426.655679 426.655679 6: seq: 19, get_clock
Sent 41 427.639894 427.639894 6: seq: 1a, get_clock
Sent 42 428.625141 428.625141 6: seq: 1b, get_clock
Sent 43 429.610135 429.610135 6: seq: 1c, get_clock
Sent 44 430.594622 430.594622 6: seq: 1d, get_clock
Sent 45 431.579414 431.579414 6: seq: 1e, get_clock
Sent 46 432.563665 432.563665 6: seq: 1f, get_clock
Sent 47 433.547801 433.547801 6: seq: 10, get_clock
Sent 48 434.532715 434.532715 6: seq: 11, get_clock
Sent 49 435.517119 435.517119 6: seq: 12, get_clock
Sent 50 436.501679 436.501679 6: seq: 13, get_clock
Sent 51 437.486447 437.486447 6: seq: 14, get_clock
Sent 52 438.471296 438.471296 6: seq: 15, get_clock
Sent 53 439.455258 439.455258 6: seq: 16, get_clock
Sent 54 440.440021 440.440021 6: seq: 17, get_clock
Sent 55 441.424951 441.424951 6: seq: 18, get_clock
Sent 56 442.410065 442.410065 6: seq: 19, get_clock
Sent 57 443.395265 443.395265 6: seq: 1a, get_clock
Sent 58 444.380109 444.380109 6: seq: 1b, get_clock
Sent 59 445.364552 445.364552 6: seq: 1c, get_clock
Sent 60 446.349422 446.349422 6: seq: 1d, get_clock
Sent 61 447.334379 447.334379 6: seq: 1e, get_clock
Sent 62 448.318920 448.318920 6: seq: 1f, get_clock
Sent 63 449.303293 449.303293 6: seq: 10, get_clock
Sent 64 450.287784 450.287784 6: seq: 11, get_clock
Sent 65 451.272839 451.272839 6: seq: 12, get_clock
Sent 66 452.257189 452.257189 6: seq: 13, get_clock
Sent 67 453.241979 453.241979 6: seq: 14, get_clock
Sent 68 454.226524 454.226524 6: seq: 15, get_clock
Sent 69 455.210502 455.210502 6: seq: 16, get_clock
Sent 70 456.195623 456.195623 6: seq: 17, get_clock
Sent 71 457.180639 457.180639 6: seq: 18, get_clock
Sent 72 458.165095 458.165095 6: seq: 19, get_clock
Sent 73 459.149953 459.149953 6: seq: 1a, get_clock
Sent 74 460.134307 460.134307 6: seq: 1b, get_clock
Sent 75 461.119190 461.119190 6: seq: 1c, get_clock
Sent 76 462.103795 462.103795 6: seq: 1d, get_clock
Sent 77 463.088782 463.088782 6: seq: 1e, get_clock
Sent 78 464.073131 464.073131 6: seq: 1f, get_clock
Sent 79 465.058103 465.058103 6: seq: 10, get_clock
Sent 80 466.042638 466.042638 6: seq: 11, get_clock
Sent 81 467.027012 467.027012 6: seq: 12, get_clock
Sent 82 468.011389 468.011389 6: seq: 13, get_clock
Sent 83 468.996277 468.996277 6: seq: 14, get_clock
Sent 84 469.980802 469.980802 6: seq: 15, get_clock
Sent 85 470.965193 470.965193 6: seq: 16, get_clock
Sent 86 471.950175 471.950175 6: seq: 17, get_clock
Sent 87 472.935032 472.935032 6: seq: 18, get_clock
Sent 88 473.919452 473.919452 6: seq: 19, get_clock
Sent 89 474.904516 474.904516 6: seq: 1a, get_clock
Sent 90 475.889014 475.889014 6: seq: 1b, get_clock
Sent 91 476.874108 476.874108 6: seq: 1c, get_clock
Sent 92 477.858284 477.858284 6: seq: 1d, get_clock
Sent 93 478.842994 478.842994 6: seq: 1e, get_clock
Sent 94 479.827716 479.827716 6: seq: 1f, get_clock
Sent 95 480.812074 480.812074 6: seq: 10, get_clock
Sent 96 481.796820 481.796820 6: seq: 11, get_clock
Sent 97 482.781541 482.781541 6: seq: 12, get_clock
Sent 98 483.765633 483.765633 6: seq: 13, get_clock
Sent 99 484.750482 484.750482 6: seq: 14, get_clock
Dumping receive queue 100 messages
Receive: 0 404.011916 404.011648 11: seq: 13, clock clock=2570677195
Receive: 1 404.996932 404.996489 11: seq: 14, clock clock=2619927560
Receive: 2 405.980993 405.980706 11: seq: 15, clock clock=2669129187
Receive: 3 406.966071 406.965747 11: seq: 16, clock clock=2718384110
Receive: 4 407.950541 407.950009 11: seq: 17, clock clock=2767599476
Receive: 5 407.950559 407.950009 13: seq: 17, stats count=56 sum=29887 sumsq=259993
Receive: 6 408.935214 408.934669 11: seq: 18, clock clock=2816841382
Receive: 7 409.919599 409.919387 11: seq: 19, clock clock=2866061937
Receive: 8 410.903648 410.903475 11: seq: 1a, clock clock=2915265267
Receive: 9 411.888024 411.887690 11: seq: 1b, clock clock=2964479963
Receive: 10 412.872372 412.872121 11: seq: 1c, clock clock=3013699796
Receive: 11 413.001167 412.872121 13: seq: 1c, stats count=56 sum=24541 sumsq=176680
Receive: 12 413.857342 413.857082 11: seq: 1d, clock clock=3062947552
Receive: 13 414.841728 414.841388 11: seq: 1e, clock clock=3112164881
Receive: 14 415.826668 415.826208 11: seq: 1f, clock clock=3161413693
Receive: 15 416.810854 416.810553 11: seq: 10, clock clock=3210623876
Receive: 16 417.795382 417.795105 11: seq: 11, clock clock=3259847462
Receive: 17 418.101105 417.795105 13: seq: 11, stats count=56 sum=25375 sumsq=182563
Receive: 18 418.779684 418.779406 11: seq: 12, clock clock=3309063237
Receive: 19 419.764318 419.763988 11: seq: 13, clock clock=3358294458
Receive: 20 420.748478 420.748149 11: seq: 14, clock clock=3407502092
Receive: 21 421.733352 421.733084 11: seq: 15, clock clock=3456747648
Receive: 22 422.717893 422.717645 11: seq: 16, clock clock=3505974827
Receive: 23 423.101151 422.717645 13: seq: 16, stats count=55 sum=25910 sumsq=199563
Receive: 24 423.702033 423.701774 11: seq: 17, clock clock=3555182222
Receive: 25 424.686589 424.686322 11: seq: 18, clock clock=3604410126
Receive: 26 425.671521 425.671250 11: seq: 19, clock clock=3653656448
Receive: 27 426.655978 426.655679 11: seq: 1a, clock clock=3702877214
Receive: 28 427.640153 427.639894 11: seq: 1b, clock clock=3752086784
Receive: 29 428.201168 427.639894 13: seq: 1b, stats count=56 sum=25268 sumsq=184102
Receive: 30 428.625462 428.625141 11: seq: 1c, clock clock=3801351177
Receive: 31 429.610391 429.610135 11: seq: 1d, clock clock=3850599783
Receive: 32 430.594852 430.594622 11: seq: 1e, clock clock=3899823090
Receive: 33 431.579766 431.579414 11: seq: 1f, clock clock=3949067906
Receive: 34 432.564188 432.563665 11: seq: 10, clock clock=3998279621
Receive: 35 433.301148 432.563665 13: seq: 10, stats count=56 sum=25641 sumsq=190970
Receive: 36 433.548037 433.547801 11: seq: 11, clock clock=4047481305
Receive: 37 434.532975 434.532715 11: seq: 12, clock clock=4096728517
Receive: 38 435.517362 435.517119 11: seq: 13, clock clock=4145947414
Receive: 39 436.501901 436.501679 11: seq: 14, clock clock=4195175240
Receive: 40 437.486782 437.486447 10: seq: 15, clock clock=4244418617
Receive: 41 438.301163 437.486447 13: seq: 15, stats count=55 sum=25381 sumsq=183228
Receive: 42 438.471534 438.471296 10: seq: 16, clock clock=4293655141
Receive: 43 439.455615 439.455258 10: seq: 17, clock clock=47892597
Receive: 44 440.440656 440.440021 10: seq: 18, clock clock=97141904
Receive: 45 441.425134 441.424951 10: seq: 19, clock clock=146370148
Receive: 46 442.410361 442.410065 10: seq: 1a, clock clock=195629070
Receive: 47 443.395505 443.395265 11: seq: 1b, clock clock=244885977
Receive: 48 443.395521 443.395265 13: seq: 1b, stats count=56 sum=27517 sumsq=197359
Receive: 49 444.380337 444.380109 11: seq: 1c, clock clock=294128790
Receive: 50 445.364766 445.364552 11: seq: 1d, clock clock=343350941
Receive: 51 446.349623 446.349422 11: seq: 1e, clock clock=392593881
Receive: 52 447.334678 447.334379 11: seq: 1f, clock clock=441844773
Receive: 53 448.319152 448.318920 11: seq: 10, clock clock=491069592
Receive: 54 448.401122 448.318920 13: seq: 10, stats count=56 sum=23613 sumsq=156066
Receive: 55 449.303495 449.303293 11: seq: 11, clock clock=540286780
Receive: 56 450.288026 450.287784 11: seq: 12, clock clock=589512843
Receive: 57 451.273157 451.272839 11: seq: 13, clock clock=638767073
Receive: 58 452.257523 452.257189 11: seq: 14, clock clock=687985795
Receive: 59 453.242533 453.241979 11: seq: 15, clock clock=737236269
Receive: 60 453.501146 453.241979 13: seq: 15, stats count=56 sum=25021 sumsq=177774
Receive: 61 454.226759 454.226524 11: seq: 16, clock clock=786449822
Receive: 62 455.210862 455.210502 11: seq: 17, clock clock=835650144
Receive: 63 456.195963 456.195623 11: seq: 18, clock clock=884905072
Receive: 64 457.181103 457.180639 11: seq: 19, clock clock=934156904
Receive: 65 458.165403 458.165095 11: seq: 1a, clock clock=983381820
Receive: 66 458.501160 458.165095 13: seq: 1a, stats count=55 sum=25589 sumsq=191154
Receive: 67 459.150334 459.149953 11: seq: 1b, clock clock=1032627890
Receive: 68 460.134564 460.134307 11: seq: 1c, clock clock=1081840979
Receive: 69 461.119573 461.119190 11: seq: 1d, clock clock=1131089714
Receive: 70 462.104054 462.103795 11: seq: 1e, clock clock=1180312942
Receive: 71 463.089053 463.088782 11: seq: 1f, clock clock=1229564025
Receive: 72 463.501183 463.088782 13: seq: 1f, stats count=55 sum=26035 sumsq=203942
Receive: 73 464.073367 464.073131 11: seq: 10, clock clock=1278779803
Receive: 74 465.058379 465.058103 11: seq: 11, clock clock=1328028036
Receive: 75 466.042969 466.042638 11: seq: 12, clock clock=1377256592
Receive: 76 467.027246 467.027012 11: seq: 13, clock clock=1426473569
Receive: 77 468.011616 468.011389 11: seq: 14, clock clock=1475692228
Receive: 78 468.601159 468.011389 13: seq: 14, stats count=56 sum=24853 sumsq=179936
Receive: 79 468.996538 468.996277 11: seq: 15, clock clock=1524938442
Receive: 80 469.981243 469.980802 11: seq: 16, clock clock=1574166845
Receive: 81 470.965740 470.965193 11: seq: 17, clock clock=1623397645
Receive: 82 471.950523 471.950175 11: seq: 18, clock clock=1672636164
Receive: 83 472.935310 472.935032 11: seq: 19, clock clock=1721874980
Receive: 84 473.701208 472.935032 13: seq: 19, stats count=56 sum=25742 sumsq=189822
Receive: 85 473.919703 473.919452 11: seq: 1a, clock clock=1771094101
Receive: 86 474.904769 474.904516 11: seq: 1b, clock clock=1820347394
Receive: 87 475.889270 475.889014 11: seq: 1c, clock clock=1869572437
Receive: 88 476.874330 476.874108 11: seq: 1d, clock clock=1918826300
Receive: 89 477.858530 477.858284 11: seq: 1e, clock clock=1968036981
Receive: 90 478.801193 477.858284 13: seq: 1e, stats count=56 sum=25692 sumsq=185808
Receive: 91 478.843265 478.842994 11: seq: 1f, clock clock=2017273586
Receive: 92 479.828031 479.827716 11: seq: 10, clock clock=2066511852
Receive: 93 480.812316 480.812074 11: seq: 11, clock clock=2115726042
Receive: 94 481.797154 481.796820 11: seq: 12, clock clock=2164967789
Receive: 95 482.781782 482.781541 11: seq: 13, clock clock=2214198745
Receive: 96 483.766192 483.765633 11: seq: 14, clock clock=2263419427
Receive: 97 483.801206 483.765633 13: seq: 14, stats count=56 sum=28053 sumsq=241350
Receive: 98 484.750762 484.750482 11: seq: 15, clock clock=2312646575
Receive: 99 485.415008 484.750482 12: seq: 15, shutdown clock=2345861642 static_string_id=Force shutdown command
webhooks client 3045745776: Disconnected
Transition to shutdown state: MCU 'pi' shutdown: Force shutdown command
Reactor garbage collection: (120.437719169, 414.975214734, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=64000000 last_clock=166534579461 clock_est=(456.196 164707133151 63998862.699) min_half_rtt=0.000082 min_rtt_time=86.989 time_avg=456.196(843.437) clock_avg=164707133151.327(53979033849.123) pred_variance=652796.318
Dumping serial stats: bytes_write=3404 bytes_read=12036 bytes_retransmit=9 bytes_invalid=0 send_seq=546 receive_seq=546 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0
Dumping send queue 100 messages
Sent 0 388.258241 388.258241 6: seq: 1e, get_clock
Sent 1 389.243088 389.243088 6: seq: 1f, get_clock
Sent 2 390.227698 390.227698 6: seq: 10, get_clock
Sent 3 391.212047 391.212047 6: seq: 11, get_clock
Sent 4 392.196658 392.196658 6: seq: 12, get_clock
Sent 5 393.181660 393.181660 6: seq: 13, get_clock
Sent 6 394.166383 394.166383 6: seq: 14, get_clock
Sent 7 395.150477 395.150477 6: seq: 15, get_clock
Sent 8 396.134856 396.134856 6: seq: 16, get_clock
Sent 9 397.119262 397.119262 6: seq: 17, get_clock
Sent 10 398.103890 398.103890 6: seq: 18, get_clock
Sent 11 399.088618 399.088618 6: seq: 19, get_clock
Sent 12 400.073258 400.073258 6: seq: 1a, get_clock
Sent 13 401.057656 401.057656 6: seq: 1b, get_clock
Sent 14 402.042062 402.042062 6: seq: 1c, get_clock
Sent 15 403.026944 403.026944 6: seq: 1d, get_clock
Sent 16 404.011410 404.011410 6: seq: 1e, get_clock
Sent 17 404.996123 404.996123 6: seq: 1f, get_clock
Sent 18 405.980506 405.980506 6: seq: 10, get_clock
Sent 19 406.965543 406.965543 6: seq: 11, get_clock
Sent 20 407.949811 407.949811 6: seq: 12, get_clock
Sent 21 408.934463 408.934463 6: seq: 13, get_clock
Sent 22 409.919138 409.919138 6: seq: 14, get_clock
Sent 23 410.903262 410.903262 6: seq: 15, get_clock
Sent 24 411.887369 411.887369 6: seq: 16, get_clock
Sent 25 412.871820 412.871820 6: seq: 17, get_clock
Sent 26 413.856363 413.856363 6: seq: 18, get_clock
Sent 27 414.841082 414.841082 6: seq: 19, get_clock
Sent 28 415.825881 415.825881 6: seq: 1a, get_clock
Sent 29 416.810327 416.810327 6: seq: 1b, get_clock
Sent 30 417.795048 417.795048 6: seq: 1c, get_clock
Sent 31 418.779353 418.779353 6: seq: 1d, get_clock
Sent 32 419.763935 419.763935 6: seq: 1e, get_clock
Sent 33 420.748094 420.748094 6: seq: 1f, get_clock
Sent 34 421.732776 421.732776 6: seq: 10, get_clock
Sent 35 422.717213 422.717213 6: seq: 11, get_clock
Sent 36 423.701469 423.701469 6: seq: 12, get_clock
Sent 37 424.685879 424.685879 6: seq: 13, get_clock
Sent 38 425.670788 425.670788 6: seq: 14, get_clock
Sent 39 426.655371 426.655371 6: seq: 15, get_clock
Sent 40 427.639619 427.639619 6: seq: 16, get_clock
Sent 41 428.624829 428.624829 6: seq: 17, get_clock
Sent 42 429.609824 429.609824 6: seq: 18, get_clock
Sent 43 430.594243 430.594243 6: seq: 19, get_clock
Sent 44 431.578954 431.578954 6: seq: 1a, get_clock
Sent 45 432.563372 432.563372 6: seq: 1b, get_clock
Sent 46 433.547759 433.547759 6: seq: 1c, get_clock
Sent 47 434.532489 434.532489 6: seq: 1d, get_clock
Sent 48 435.516859 435.516859 6: seq: 1e, get_clock
Sent 49 436.501345 436.501345 6: seq: 1f, get_clock
Sent 50 437.486244 437.486244 6: seq: 10, get_clock
Sent 51 438.471046 438.471046 6: seq: 11, get_clock
Sent 52 439.455056 439.455056 6: seq: 12, get_clock
Sent 53 440.439803 440.439803 6: seq: 13, get_clock
Sent 54 441.424757 441.424757 6: seq: 14, get_clock
Sent 55 442.409868 442.409868 6: seq: 15, get_clock
Sent 56 443.395034 443.395034 6: seq: 16, get_clock
Sent 57 444.379917 444.379917 6: seq: 17, get_clock
Sent 58 445.364355 445.364355 6: seq: 18, get_clock
Sent 59 446.349224 446.349224 6: seq: 19, get_clock
Sent 60 447.334148 447.334148 6: seq: 1a, get_clock
Sent 61 448.318654 448.318654 6: seq: 1b, get_clock
Sent 62 449.303071 449.303071 6: seq: 1c, get_clock
Sent 63 450.287527 450.287527 6: seq: 1d, get_clock
Sent 64 451.272577 451.272577 6: seq: 1e, get_clock
Sent 65 452.256954 452.256954 6: seq: 1f, get_clock
Sent 66 453.241738 453.241738 6: seq: 10, get_clock
Sent 67 454.226266 454.226266 6: seq: 11, get_clock
Sent 68 455.210279 455.210279 6: seq: 12, get_clock
Sent 69 456.195372 456.195372 6: seq: 13, get_clock
Sent 70 457.180397 457.180397 6: seq: 14, get_clock
Sent 71 458.165035 458.165035 6: seq: 15, get_clock
Sent 72 459.149891 459.149891 6: seq: 16, get_clock
Sent 73 460.134256 460.134256 6: seq: 17, get_clock
Sent 74 461.119128 461.119128 6: seq: 18, get_clock
Sent 75 462.103557 462.103557 6: seq: 19, get_clock
Sent 76 463.088524 463.088524 6: seq: 1a, get_clock
Sent 77 464.072901 464.072901 6: seq: 1b, get_clock
Sent 78 465.057859 465.057859 6: seq: 1c, get_clock
Sent 79 466.042420 466.042420 6: seq: 1d, get_clock
Sent 80 467.026638 467.026638 6: seq: 1e, get_clock
Sent 81 468.011177 468.011177 6: seq: 1f, get_clock
Sent 82 468.996028 468.996028 6: seq: 10, get_clock
Sent 83 469.980579 469.980579 6: seq: 11, get_clock
Sent 84 470.964976 470.964976 6: seq: 12, get_clock
Sent 85 471.949982 471.949982 6: seq: 13, get_clock
Sent 86 472.934821 472.934821 6: seq: 14, get_clock
Sent 87 473.919241 473.919241 6: seq: 15, get_clock
Sent 88 474.904302 474.904302 6: seq: 16, get_clock
Sent 89 475.888799 475.888799 6: seq: 17, get_clock
Sent 90 476.873918 476.873918 6: seq: 18, get_clock
Sent 91 477.858069 477.858069 6: seq: 19, get_clock
Sent 92 478.842782 478.842782 6: seq: 1a, get_clock
Sent 93 479.827498 479.827498 6: seq: 1b, get_clock
Sent 94 480.811857 480.811857 6: seq: 1c, get_clock
Sent 95 481.796596 481.796596 6: seq: 1d, get_clock
Sent 96 482.781352 482.781352 6: seq: 1e, get_clock
Sent 97 483.765409 483.765409 6: seq: 1f, get_clock
Sent 98 484.750258 484.750258 6: seq: 10, get_clock
Sent 99 485.444976 485.444976 6: seq: 11, emergency_stop
Dumping receive queue 100 messages
Receive: 0 404.011806 404.011410 11: seq: 1f, clock clock=2453595225
Receive: 1 404.996426 404.996123 11: seq: 10, clock clock=2516616014
Receive: 2 405.980838 405.980506 11: seq: 11, clock clock=2579615053
Receive: 3 406.965818 406.965543 11: seq: 12, clock clock=2642656149
Receive: 4 407.646381 406.965543 13: seq: 12, stats count=67 sum=38898 sumsq=132115
Receive: 5 407.950096 407.949811 11: seq: 13, clock clock=2705648533
Receive: 6 408.934741 408.934463 11: seq: 14, clock clock=2768664937
Receive: 7 409.919888 409.919138 11: seq: 15, clock clock=2831683021
Receive: 8 410.903575 410.903262 11: seq: 16, clock clock=2894665233
Receive: 9 411.887867 411.887369 11: seq: 17, clock clock=2957647578
Receive: 10 412.646477 411.887369 13: seq: 17, stats count=67 sum=38898 sumsq=132115
Receive: 11 412.872263 412.871820 11: seq: 18, clock clock=3020653290
Receive: 12 413.856631 413.856363 11: seq: 19, clock clock=3083660841
Receive: 13 414.841616 414.841082 11: seq: 1a, clock clock=3146683890
Receive: 14 415.826162 415.825881 11: seq: 1b, clock clock=3209707659
Receive: 15 416.810636 416.810327 11: seq: 1c, clock clock=3272714495
Receive: 16 417.646539 416.810327 13: seq: 1c, stats count=67 sum=38898 sumsq=132115
Receive: 17 417.795301 417.795048 11: seq: 1d, clock clock=3335732275
Receive: 18 418.779615 418.779353 11: seq: 1e, clock clock=3398727010
Receive: 19 419.764265 419.763935 11: seq: 1f, clock clock=3461739243
Receive: 20 420.748402 420.748094 11: seq: 10, clock clock=3524724021
Receive: 21 421.733064 421.732776 11: seq: 11, clock clock=3587742499
Receive: 22 422.646640 421.732776 13: seq: 11, stats count=67 sum=38898 sumsq=132115
Receive: 23 422.717466 422.717213 11: seq: 12, clock clock=3650744967
Receive: 24 423.701926 423.701469 11: seq: 13, clock clock=3713736497
Receive: 25 424.686146 424.685879 11: seq: 14, clock clock=3776737999
Receive: 26 425.671073 425.670788 11: seq: 15, clock clock=3839771751
Receive: 27 426.655835 426.655371 11: seq: 16, clock clock=3902782998
Receive: 28 427.640028 427.639619 11: seq: 17, clock clock=3965773242
Receive: 29 427.646700 427.639619 13: seq: 17, stats count=70 sum=41831 sumsq=149125
Receive: 30 428.625317 428.624829 11: seq: 18, clock clock=4028825934
Receive: 31 429.610287 429.609824 11: seq: 19, clock clock=4091864955
Receive: 32 430.594536 430.594243 11: seq: 1a, clock clock=4154866170
Receive: 33 431.579264 431.578954 11: seq: 1b, clock clock=4217886462
Receive: 34 432.563701 432.563372 10: seq: 1c, clock clock=4280888055
Receive: 35 432.646808 432.563372 13: seq: 1c, stats count=67 sum=38870 sumsq=131687
Receive: 36 433.548039 433.547759 10: seq: 1d, clock clock=48920967
Receive: 37 434.533024 434.532489 10: seq: 1e, clock clock=111942122
Receive: 38 435.517391 435.516859 10: seq: 1f, clock clock=174941897
Receive: 39 436.501641 436.501345 11: seq: 10, clock clock=237946599
Receive: 40 437.486539 437.486244 11: seq: 11, clock clock=300978997
Receive: 41 437.646897 437.486244 13: seq: 11, stats count=67 sum=38814 sumsq=130831
Receive: 42 438.471621 438.471046 11: seq: 12, clock clock=364005177
Receive: 43 439.455348 439.455056 11: seq: 13, clock clock=426980707
Receive: 44 440.440123 440.439803 11: seq: 14, clock clock=490003783
Receive: 45 441.425072 441.424757 11: seq: 15, clock clock=553039322
Receive: 46 442.410269 442.409868 11: seq: 16, clock clock=616085001
Receive: 47 442.647055 442.409868 13: seq: 16, stats count=67 sum=38906 sumsq=132198
Receive: 48 443.395295 443.395034 11: seq: 17, clock clock=679134598
Receive: 49 444.380157 444.379917 11: seq: 18, clock clock=742165738
Receive: 50 445.364617 445.364355 11: seq: 19, clock clock=805168962
Receive: 51 446.349527 446.349224 11: seq: 1a, clock clock=868199249
Receive: 52 447.334421 447.334148 11: seq: 1b, clock clock=931234106
Receive: 53 447.647095 447.334148 13: seq: 1b, stats count=67 sum=38898 sumsq=132115
Receive: 54 448.318931 448.318654 11: seq: 1c, clock clock=994240883
Receive: 55 449.303493 449.303071 11: seq: 1d, clock clock=1057242221
Receive: 56 450.287816 450.287527 11: seq: 1e, clock clock=1120246854
Receive: 57 451.272853 451.272577 11: seq: 1f, clock clock=1183289209
Receive: 58 452.257257 452.256954 11: seq: 10, clock clock=1246287517
Receive: 59 452.647193 452.256954 13: seq: 10, stats count=67 sum=38898 sumsq=132115
Receive: 60 453.242016 453.241738 11: seq: 11, clock clock=1309312961
Receive: 61 454.226658 454.226266 11: seq: 12, clock clock=1372321439
Receive: 62 455.210561 455.210279 11: seq: 13, clock clock=1435296702
Receive: 63 456.195659 456.195372 11: seq: 14, clock clock=1498342781
Receive: 64 457.180701 457.180397 11: seq: 15, clock clock=1561382549
Receive: 65 457.647229 457.180397 13: seq: 15, stats count=67 sum=38898 sumsq=132115
Receive: 66 458.165406 458.165035 11: seq: 16, clock clock=1624398334
Receive: 67 459.150326 459.149891 11: seq: 17, clock clock=1687428695
Receive: 68 460.134584 460.134256 11: seq: 18, clock clock=1750425911
Receive: 69 461.119565 461.119128 11: seq: 19, clock clock=1813457007
Receive: 70 462.103833 462.103557 11: seq: 1a, clock clock=1876459070
Receive: 71 462.647400 462.103557 13: seq: 1a, stats count=67 sum=38898 sumsq=132115
Receive: 72 463.088949 463.088524 11: seq: 1b, clock clock=1939498338
Receive: 73 464.073214 464.072901 11: seq: 1c, clock clock=2002495457
Receive: 74 465.058124 465.057859 11: seq: 1d, clock clock=2065531439
Receive: 75 466.042699 466.042420 11: seq: 1e, clock clock=2128541213
Receive: 76 467.026938 467.026638 11: seq: 1f, clock clock=2191530759
Receive: 77 467.647441 467.026638 13: seq: 1f, stats count=67 sum=38898 sumsq=132115
Receive: 78 468.011507 468.011177 11: seq: 10, clock clock=2254542842
Receive: 79 468.996300 468.996028 11: seq: 11, clock clock=2317569774
Receive: 80 469.980866 469.980579 11: seq: 12, clock clock=2380579511
Receive: 81 470.965276 470.964976 11: seq: 13, clock clock=2443580401
Receive: 82 471.950241 471.949982 11: seq: 14, clock clock=2506619599
Receive: 83 472.647553 471.949982 13: seq: 14, stats count=67 sum=38898 sumsq=132115
Receive: 84 472.935169 472.934821 11: seq: 15, clock clock=2569651021
Receive: 85 473.919693 473.919241 11: seq: 16, clock clock=2632649355
Receive: 86 474.904765 474.904302 11: seq: 17, clock clock=2695692217
Receive: 87 475.889279 475.888799 11: seq: 18, clock clock=2758698846
Receive: 88 476.874336 476.873918 11: seq: 19, clock clock=2821744955
Receive: 89 477.647646 476.873918 13: seq: 19, stats count=67 sum=38898 sumsq=132115
Receive: 90 477.858339 477.858069 11: seq: 1a, clock clock=2884729711
Receive: 91 478.843066 478.842782 11: seq: 1b, clock clock=2947750707
Receive: 92 479.827793 479.827498 11: seq: 1c, clock clock=3010771079
Receive: 93 480.812160 480.811857 11: seq: 1d, clock clock=3073768971
Receive: 94 481.796910 481.796596 11: seq: 1e, clock clock=3136791790
Receive: 95 482.647718 481.796596 13: seq: 1e, stats count=67 sum=38898 sumsq=132115
Receive: 96 482.781592 482.781352 11: seq: 1f, clock clock=3199813922
Receive: 97 483.765713 483.765409 11: seq: 10, clock clock=3262793643
Receive: 98 484.750543 484.750258 11: seq: 11, clock clock=3325822213
Receive: 99 485.445645 485.444976 12: seq: 12, shutdown clock=3370282529 static_string_id=Command request
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/klipper_config/printer.cfg', '-l', '/home/pi/klipper_logs/klippy.log', '-a', '/tmp/klippy_uds']
Git version: 'v0.10.0-623-g5b1a6676'
CPU: 4 core ARMv7 Processor rev 3 (v7l)
Python: '3.7.3 (default, Jan 22 2021, 20:04:44) \n[GCC 8.3.0]'
Start printer at Thu Nov 17 23:16:04 2022 (1668748564.1 22.7)
===== Config file =====
[adxl345]
cs_pin = can0:PB12
spi_software_sclk_pin = can0:PB10
spi_software_mosi_pin = can0:PB11
spi_software_miso_pin = can0:PB2
axes_map = x,y,z

[resonance_tester]
accel_chip = adxl345
probe_points = 
	60,60,20

[neopixel hat]
pin = PA8
chain_count = 18
color_order = GRB

[gcode_macro HAT_ON]
gcode = 
	SET_LED LED=hat GREEN=1 BLUE=1 RED=1

[gcode_macro HAT_OFF]
gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=0

[neopixel underglow]
pin = PD5
chain_count = 24
color_order = GRB

[gcode_macro UNDERGLOW_ON]
gcode = 
	SET_LED LED=underglow GREEN=1 BLUE=1 RED=1

[gcode_macro UNDERGLOW_OFF]
gcode = 
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=0

[gcode_macro NEOPIXEL_DISPLAY]
gcode = 
	{% set led = params.LED %}
	{% set type = params.TYPE %}
	{% set mode = params.MODE %}
	{% set my_neopixel = printer.configfile.config['neopixel ' ~ led] %}
	
	{% if mode == 'progress' %}
	{% for i in range(my_neopixel.chain_count|int) %}
	SET_LED_TEMPLATE LED={led} INDEX={i+1} TEMPLATE={'led_' ~ type ~ '_' ~ mode} param_led_num={i+1} param_led_total={my_neopixel.chain_count|int}
	{% endfor %}
	{% endif %}
	{% if mode == 'glow' %}
	SET_LED_TEMPLATE LED={led} TEMPLATE={'led_' ~ type ~ '_' ~ mode}
	{% endif %}

[display_template led_extruder_temp_glow]
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_extruder_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.extruder.target > 0.0 %}
	{%  set temp = printer.extruder.target %}
	{% else %}
	{% set temp = printer.configfile.config.extruder.max_temp %}
	{% endif %}
	{% set ratio = printer.extruder.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_bed_temp_glow]
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{ratio}, 0.0, {1-ratio}, 0.0

[display_template led_bed_temp_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% if printer.heater_bed.target > 0.0 %}
	{%  set temp = printer.heater_bed.target %}
	{% else %}
	{% set temp = printer.configfile.config.heater_bed.max_temp %}
	{% endif %}
	{% set ratio = printer.heater_bed.temperature / temp|float %}
	{% set led_ratio = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	{led_ratio}, 0.0, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_print_percent_glow]
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_print_percent_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio = printer.virtual_sdcard.progress %}
	{% set led_ratio   = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[display_template led_printer_speed_glow]
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	0.0, {ratio}, 0.0, 0.0

[display_template led_printer_speed_progress]
param_led_num = 0
param_led_total = 1
text = 
	{% set ratio  = printer.motion_report.live_velocity|float /  printer.configfile.config.printer.max_velocity|float %}
	{% set led_ratio    = param_led_num|float / param_led_total %}
	{% if ratio > led_ratio %}
	0.0, {led_ratio}, 0.0, 0.0
	{% else %}
	0.0, 0.0, 0.0, 0.0
	{% endif %}

[gcode_macro _PRINT_START]
gcode = 
	{% set bedtemp = params.BED|int %}
	{% set hotendtemp = params.HOTEND|int %}
	{% set filament_profile = params.FILID|string %}
	G21
	G90
	M83
	G28
	NEOPIXEL_DISPLAY LED=underglow TYPE=extruder_temp MODE=glow
	G1 Z20 F50
	M190 S{bedtemp}
	M109 S{hotendtemp}
	G28 Z
	RESPOND TYPE=command MSG="Print start"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_starting"
	
	
	{% if filament_profile == 'PLA_LOUD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=100
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% elif filid == 'PLA_STANDARD' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	SET_PRESSURE_ADVANCE ADVANCE=0.035
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 0%"
	{% elif filid == 'ABS' %}
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="{filament_profile} - Boost fans 100%"
	{% endif %}
	
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=progress

[gcode_macro _PRINT_END]
gcode = 
	M400
	G92 E0
	G1 E-4.0 F3600
	G91
	SET_FAN_SPEED FAN=boostFans SPEED=0
	RESPOND TYPE=command MSG="Print end"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_done"
	NEOPIXEL_DISPLAY LED=underglow TYPE=print_percent MODE=glow
	
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 20) %}
	{% set z_safe = 20 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	TURN_OFF_HEATERS
	M107
	G90
	G0 X60 Y{max_y} F3600
	DISABLE_STEPPERS
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro PAUSE]
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL
	RESPOND TYPE=command MSG="Print pause"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_paused"

[gcode_macro RESUME]
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}
	RESPOND TYPE=command MSG="Print resume"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_resuming"

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
variable_park = True
gcode = 
	SET_FAN_SPEED FAN=boostFans SPEED=0
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	SDCARD_RESET_FILE
	CANCEL_PRINT_BASE
	RESPOND TYPE=command MSG="Print cancel"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="print_cancelled"

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[gcode_macro DISABLE_STEPPERS]
description = Disable the steppers
gcode = 
	M18
	RESPOND TYPE=command MSG="Steppers disabled"

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E30 F300
	G1 E15 F150
	M82
	RESPOND TYPE=command MSG="Load filament"

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E10 F300
	G1 E-40 F1800
	M82
	RESPOND TYPE=command MSG="Unload filament"

[gcode_macro _TALKETEMP]
gcode = 
	{% set TEMPE = params.TEMPE|int %}
	RESPOND TYPE=command MSG="Extruder temperature: {TEMPE}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="extruder_temperature_{TEMPE}"

[gcode_macro _TALKBTEMP]
gcode = 
	{% set TEMPB = params.TEMPB|int %}
	RESPOND TYPE=command MSG="Bed temperature: {TEMPB}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="bed_temperature_{TEMPB}"

[gcode_macro _TALKFILSET]
gcode = 
	{% set FILSET = params.FILSET|string %}
	RESPOND TYPE=command MSG="Slicer profile: {FILSET}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="slicer_filament_settings_{FILSET}"

[gcode_macro _TALKLHEIGHT]
gcode = 
	{% set LHEIGHT = params.LHEIGHT|string %}
	RESPOND TYPE=command MSG="Layer height: {LHEIGHT}"
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="layer_height_{LHEIGHT}"

[gcode_shell_command SPEAK]
command = espeak
timeout = 30
verbose = false

[delayed_gcode connected]
initial_duration = 1
gcode = 
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Printer_ready"

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[temperature_sensor SKR_temp]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 100

[temperature_sensor toolhead_MCU]
sensor_type = temperature_mcu
sensor_mcu = can0
min_temp = 0
max_temp = 100

[temperature_fan Stepper_Left]
pin = PC6
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA2
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_LEFT

[temperature_fan Stepper_Righ]
pin = PC7
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.3
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA3
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 40
max_speed = 1.0
min_speed = 0
gcode_id = STEPPER_RIGHT

[temperature_fan electronics_bay]
pin = pi:gpio24
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
sensor_type = Generic 3950
min_temp = 0
max_temp = 100
sensor_pin = PA0
pullup_resistor = 4700
control = pid
pid_kp = 28.182
pid_ki = 1.978
pid_kd = 100.397
pid_deriv_time = 120
target_temp = 35
max_speed = 1.0
min_speed = 0
gcode_id = ELECTRONICSBAY

[controller_fan Skr_cooling_fan]
pin = PB15
max_power = 1
shutdown_speed = 0
kick_start_time = 1
off_below = 0.2
idle_timeout = 60
idle_speed = 1
stepper = stepper_x, stepper_y, stepper_z

[fan_generic boostFans]
pin = pi:gpio17
max_power = 1
shutdown_speed = 0
kick_start_time = 0.1
off_below = 0.2

[gcode_macro _POWER_OFF_PRINTER]
gcode = 
	{action_call_remote_method("set_device_power",
	device="mainpower",
	state="off")}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[output_pin BEEPER_pin]
pin = pi:gpio25
pwm = True
value = 0
shutdown_value = 0
cycle_time = 0.001

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	SET_PIN PIN=BEEPER_pin VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[endstop_phase]

[pause_resume]

[display_status]

[force_move]
enable_force_move = true

[respond]
default_type = echo

[mcu pi]
serial = /tmp/klipper_host_mcu

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00

[mcu can0]
canbus_uuid = cb71706bb3a2

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	SET_LED LED=hat GREEN=0 BLUE=0 RED=1
	SET_LED LED=underglow GREEN=0 BLUE=0 RED=1
	M300 P1000 S11
	RUN_SHELL_COMMAND CMD=SPEAK PARAMS="Error_detected"

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_accel_to_decel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[safe_z_home]
home_xy_position = 120,120
speed = 20

[input_shaper]
shaper_freq_x = 73
shaper_type_x = mzv
shaper_freq_y = 87
shaper_type_y = zv

[stepper_x]
step_pin = PB13
dir_pin = PB12
enable_pin = !PB14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = can0:PB6
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PB10
dir_pin = PB2
enable_pin = !PB11
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = ^PC1
position_endstop = 120
position_max = 120
position_min = 0
homing_speed = 20
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
interpolate = False
run_current = 0.9
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PB0
dir_pin = !PC5
enable_pin = !PB1
rotation_distance = 8
microsteps = 32
endstop_pin = ^PC2
position_endstop = 0
position_max = 115
position_min = 0
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 3.0

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
interpolate = False
run_current = 0.4
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = can0:PD0
dir_pin = !can0:PD1
enable_pin = !can0:PD2
rotation_distance = 22.46572692
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
max_extrude_only_distance = 1400.0
max_extrude_only_velocity = 75.0
max_extrude_only_accel = 1500
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = can0:PB13
sensor_type = MAX31865
sensor_pin = can0:PA4
spi_bus = spi1
rtd_nominal_r = 100
rtd_reference_r = 430
rtd_num_of_wires = 2
min_extrude_temp = 180
max_temp = 450
min_temp = 0
control = pid
pid_kp = 24.513
pid_ki = 1.720
pid_kd = 87.327

[tmc2209 extruder]
uart_pin = can0:PA15
stealthchop_threshold = 0
run_current = .7

[heater_bed]
heater_pin = PC9
sensor_type = Generic 3950
sensor_pin = PC4
smooth_time = 3.0
min_temp = 0
max_temp = 120
pwm_cycle_time = 0.0166
control = pid
pid_kp = 53.726
pid_ki = 1.499
pid_kd = 481.519

[heater_fan hotend_fan]
pin = can0:PA0
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[fan]
pin = can0:PA1
kick_start_time = 0.25
cycle_time = 0.15
off_below = 0.10

[idle_timeout]
timeout = 1800

[bed_screws]
screw1 = 66,5
screw1_name = front screw
screw2 = 12,115
screw2_name = back left
screw3 = 115,115
screw3_name = back right
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00'
webhooks client 3039682032: New connection
webhooks client 3039682032: Client info {'program': 'Moonraker', 'version': 'v0.7.1-758-g5a3b1b6'}
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_stm32g0b1xx_320045000750414235363020-if00'
